Zilog eZ80 Macro Assembler Version 4.3 (19073001) RELISTED06-Mar-23     18:50:41     page:   1


PC     Object              I  Line    Source 
                           A     1    ; Zilog eZ80 ANSI C Compiler Release 3.4
                           A     2    ; -nomodsect -optsize -noreduceopt -nopadbranch
                           A     3    ; -peephole -globalopt -localcse -const=ROM 
                           A     4    	FILE	"..\vdp.c"
                           A     5    	.assume ADL=1
                           A     6    .DEBUG "C"
                           A     7    	SEGMENT CODE
                           A     8    ;    1	#include <defines.h>
                           A     9    ;    2	#include "mos-interface.h"
                           A    10    ;    3	
                           A    11    ;    4	// Generic functions
                           A    12    ;    5	
                           A    13    ;    6	void write16bit(UINT16 w)
                           A    14    ;    7	{
0403B9                     A    15    _write16bit:
                           A    16    .DEFINE "_write16bit"
                           A    17    
                           A    18    .VALUE _write16bit
                           A    19    
                           A    20    .CLASS 2
                           A    21    
                           A    22    .TYPE 65
                           A    23    
                           A    24    .ENDEF
                           A    25    
                           A    26    .BEGFUNC "write16bit",7,"_write16bit"
                           A    27    
                           A    28    .LINE 7
                           A    29    
                           A    30    .DEFINE "w"
                           A    31    
                           A    32    .CLASS 65
                           A    33    
                           A    34    .VALUE 6
                           A    35    
                           A    36    .TYPE 13
                           A    37    
                           A    38    .ENDEF
                           A    39    
0403B9 DDE5                A    40    	PUSH	IX
0403BB DD210000 00         A    41    	LD	IX,0
0403C0 DD39                A    42    	ADD	IX,SP
                           A    43    ;    8		putch(w & 0xFF); // write LSB
                           A    44    .LINE 8
                           A    45    
0403C2 DD0706              A    46    	LD	BC,(IX+%6)
0403C5 CD 3C 11 04         A    47    	CALL	__stoiu
0403C9 7D                  A    48    	LD	A,L
0403CA B7ED62              A    49    	UEXT	HL
0403CD 6F                  A    50    	LD	L,A
0403CE E5                  A    51    	PUSH	HL
0403CF CD C5 0E 04         A    52    	CALL	_putch
0403D3 C1                  A    53    	POP	BC
                           A    54    ;    9		putch(w >> 8);	 // write MSB	
                           A    55    .LINE 9
                           A    56    
0403D4 DD0706              A    57    	LD	BC,(IX+%6)
0403D7 CD 3C 11 04         A    58    	CALL	__stoiu
0403DB 3E08                A    59    	LD	A,%8
0403DD CD AC 0F 04         A    60    	CALL	__ishrs_b
0403E1 E5                  A    61    	PUSH	HL
0403E2 CD C5 0E 04         A    62    	CALL	_putch
0403E6 C1                  A    63    	POP	BC
                           A    64    ;   10	}
                           A    65    .LINE 10
                           A    66    
0403E7 DDF9                A    67    	LD	SP,IX
0403E9 DDE1                A    68    	POP	IX
0403EB C9                  A    69    	RET	
                           A    70    
                           A    71    
                           A    72    ;**************************** _write16bit *****
                           A    73    ;Name                         Addr/Register   S
                           A    74    ;_putch                              IMPORT  --
                           A    75    ;w                                     IX+6    
                           A    76    
                           A    77    
                           A    78    ; Stack Frame Size: 9 (bytes)
                           A    79    ;       Spill Code: 0 (instruction)
                           A    80    
                           A    81    
                           A    82    .ENDFUNC "write16bit",10,"_write16bit"
                           A    83    ;   11	
                           A    84    ;   12	void write32bit(UINT32 l)
                           A    85    ;   13	{
0403EC                     A    86    _write32bit:
                           A    87    .DEFINE "_write32bit"
                           A    88    
                           A    89    .VALUE _write32bit
                           A    90    
                           A    91    .CLASS 2
                           A    92    
                           A    93    .TYPE 65
                           A    94    
                           A    95    .ENDEF
                           A    96    
                           A    97    .BEGFUNC "write32bit",13,"_write32bit"
                           A    98    
                           A    99    .LINE 13
                           A   100    
                           A   101    .DEFINE "l"
                           A   102    
                           A   103    .CLASS 65
                           A   104    
                           A   105    .VALUE 6
                           A   106    
                           A   107    .TYPE 15
                           A   108    
                           A   109    .ENDEF
                           A   110    
                           A   111    .DEFINE "temp"
                           A   112    
                           A   113    .CLASS 65
                           A   114    
                           A   115    .VALUE -4
                           A   116    
                           A   117    .TYPE 15
                           A   118    
                           A   119    .ENDEF
                           A   120    
0403EC DDE5                A   121    	PUSH	IX
0403EE DD210000 00         A   122    	LD	IX,0
0403F3 DD39                A   123    	ADD	IX,SP
0403F5 C5                  A   124    	PUSH	BC
0403F6 3B                  A   125    	DEC	SP
                           A   126    ;   14		UINT32 temp = l;
                           A   127    ;   15		
                           A   128    ;   16		putch(temp & 0xFF); // write LSB
                           A   129    .LINE 16
                           A   130    
0403F7 DD2706              A   131    	LD	HL,(IX+%6)
0403FA 7D                  A   132    	LD	A,L
0403FB B7ED62              A   133    	UEXT	HL
0403FE 6F                  A   134    	LD	L,A
0403FF E5                  A   135    	PUSH	HL
040400 CD C5 0E 04         A   136    	CALL	_putch
040404 C1                  A   137    	POP	BC
                           A   138    ;   17		temp = temp >> 8;
                           A   139    .LINE 17
                           A   140    
040405 DD0706              A   141    	LD	BC,(IX+%6)
040408 DD7E09              A   142    	LD	A,(IX+%9)
04040B 2E08                A   143    	LD	L,%8
04040D CD D5 14 04         A   144    	CALL	__lshru
040411 DD0FFC              A   145    	LD	(IX+%FFFFFFFC),BC
040414 DD77FF              A   146    	LD	(IX+%FFFFFFFF),A
                           A   147    ;   18		putch(temp & 0xFF);
                           A   148    .LINE 18
                           A   149    
040417 C5E1                A   150    	LD	HL,BC
040419 7D                  A   151    	LD	A,L
04041A B7ED62              A   152    	UEXT	HL
04041D 6F                  A   153    	LD	L,A
04041E E5                  A   154    	PUSH	HL
04041F CD C5 0E 04         A   155    	CALL	_putch
040423 C1                  A   156    	POP	BC
                           A   157    ;   19		temp = temp >> 8;
                           A   158    .LINE 19
                           A   159    
040424 DD07FC              A   160    	LD	BC,(IX+%FFFFFFFC)
040427 DD7EFF              A   161    	LD	A,(IX+%FFFFFFFF)
04042A 2E08                A   162    	LD	L,%8
04042C CD D5 14 04         A   163    	CALL	__lshru
040430 DD0FFC              A   164    	LD	(IX+%FFFFFFFC),BC
040433 DD77FF              A   165    	LD	(IX+%FFFFFFFF),A
                           A   166    ;   20		putch(temp & 0xFF);
                           A   167    .LINE 20
                           A   168    
040436 C5E1                A   169    	LD	HL,BC
040438 7D                  A   170    	LD	A,L
040439 B7ED62              A   171    	UEXT	HL
04043C 6F                  A   172    	LD	L,A
04043D E5                  A   173    	PUSH	HL
04043E CD C5 0E 04         A   174    	CALL	_putch
040442 C1                  A   175    	POP	BC
                           A   176    ;   21		temp = temp >> 8;
                           A   177    .LINE 21
                           A   178    
040443 DD07FC              A   179    	LD	BC,(IX+%FFFFFFFC)
040446 DD7EFF              A   180    	LD	A,(IX+%FFFFFFFF)
040449 2E08                A   181    	LD	L,%8
04044B CD D5 14 04         A   182    	CALL	__lshru
04044F DD0FFC              A   183    	LD	(IX+%FFFFFFFC),BC
040452 DD77FF              A   184    	LD	(IX+%FFFFFFFF),A
                           A   185    ;   22		putch(temp & 0xFF);
                           A   186    .LINE 22
                           A   187    
040455 C5E1                A   188    	LD	HL,BC
040457 7D                  A   189    	LD	A,L
040458 B7ED62              A   190    	UEXT	HL
04045B 6F                  A   191    	LD	L,A
04045C E5                  A   192    	PUSH	HL
04045D CD C5 0E 04         A   193    	CALL	_putch
040461 C1                  A   194    	POP	BC
                           A   195    ;   23		return;	
                           A   196    ;   24	}
                           A   197    .LINE 24
                           A   198    
040462 DDF9                A   199    	LD	SP,IX
040464 DDE1                A   200    	POP	IX
040466 C9                  A   201    	RET	
                           A   202    
                           A   203    
                           A   204    ;**************************** _write32bit *****
                           A   205    ;Name                         Addr/Register   S
                           A   206    ;_putch                              IMPORT  --
                           A   207    ;temp                                  IX-4    
                           A   208    ;l                                     IX+6    
                           A   209    
                           A   210    
                           A   211    ; Stack Frame Size: 16 (bytes)
                           A   212    ;       Spill Code: 0 (instruction)
                           A   213    
                           A   214    
                           A   215    .ENDFUNC "write32bit",24,"_write32bit"
                           A   216    ;   25	
                           A   217    ;   26	void vdp_mode(unsigned char mode)
                           A   218    ;   27	{
040467                     A   219    _vdp_mode:
                           A   220    .DEFINE "_vdp_mode"
                           A   221    
                           A   222    .VALUE _vdp_mode
                           A   223    
                           A   224    .CLASS 2
                           A   225    
                           A   226    .TYPE 65
                           A   227    
                           A   228    .ENDEF
                           A   229    
                           A   230    .BEGFUNC "vdp_mode",27,"_vdp_mode"
                           A   231    
                           A   232    .LINE 27
                           A   233    
                           A   234    .DEFINE "mode"
                           A   235    
                           A   236    .CLASS 65
                           A   237    
                           A   238    .VALUE 6
                           A   239    
                           A   240    .TYPE 12
                           A   241    
                           A   242    .ENDEF
                           A   243    
040467 DDE5                A   244    	PUSH	IX
040469 DD210000 00         A   245    	LD	IX,0
04046E DD39                A   246    	ADD	IX,SP
                           A   247    ;   28	    putch(22);
                           A   248    .LINE 28
                           A   249    
040470 01160000            A   250    	LD	BC,22
040474 C5                  A   251    	PUSH	BC
040475 CD C5 0E 04         A   252    	CALL	_putch
040479 C1                  A   253    	POP	BC
                           A   254    ;   29	    putch(mode);
                           A   255    .LINE 29
                           A   256    
04047A DD7E06              A   257    	LD	A,(IX+%6)
04047D B7ED62              A   258    	UEXT	HL
040480 6F                  A   259    	LD	L,A
040481 E5                  A   260    	PUSH	HL
040482 CD C5 0E 04         A   261    	CALL	_putch
040486 C1                  A   262    	POP	BC
                           A   263    ;   30	}
                           A   264    .LINE 30
                           A   265    
040487 DDF9                A   266    	LD	SP,IX
040489 DDE1                A   267    	POP	IX
04048B C9                  A   268    	RET	
                           A   269    
                           A   270    
                           A   271    ;**************************** _vdp_mode *******
                           A   272    ;Name                         Addr/Register   S
                           A   273    ;_putch                              IMPORT  --
                           A   274    ;mode                                  IX+6    
                           A   275    
                           A   276    
                           A   277    ; Stack Frame Size: 9 (bytes)
                           A   278    ;       Spill Code: 0 (instruction)
                           A   279    
                           A   280    
                           A   281    .ENDFUNC "vdp_mode",30,"_vdp_mode"
                           A   282    ;   31	
                           A   283    ;   32	// Text functions
                           A   284    ;   33	void vdp_cls()
                           A   285    ;   34	{
04048C                     A   286    _vdp_cls:
                           A   287    .DEFINE "_vdp_cls"
                           A   288    
                           A   289    .VALUE _vdp_cls
                           A   290    
                           A   291    .CLASS 2
                           A   292    
                           A   293    .TYPE 65
                           A   294    
                           A   295    .ENDEF
                           A   296    
                           A   297    .BEGFUNC "vdp_cls",34,"_vdp_cls"
                           A   298    
04048C DDE5                A   299    	PUSH	IX
04048E DD210000 00         A   300    	LD	IX,0
040493 DD39                A   301    	ADD	IX,SP
                           A   302    ;   35	    putch(12);
                           A   303    .LINE 35
                           A   304    
040495 010C0000            A   305    	LD	BC,12
040499 C5                  A   306    	PUSH	BC
04049A CD C5 0E 04         A   307    	CALL	_putch
04049E C1                  A   308    	POP	BC
                           A   309    ;   36	}
                           A   310    .LINE 36
                           A   311    
04049F DDF9                A   312    	LD	SP,IX
0404A1 DDE1                A   313    	POP	IX
0404A3 C9                  A   314    	RET	
                           A   315    
                           A   316    
                           A   317    ;**************************** _vdp_cls ********
                           A   318    ;Name                         Addr/Register   S
                           A   319    ;_putch                              IMPORT  --
                           A   320    
                           A   321    
                           A   322    ; Stack Frame Size: 6 (bytes)
                           A   323    ;       Spill Code: 0 (instruction)
                           A   324    
                           A   325    
                           A   326    .ENDFUNC "vdp_cls",36,"_vdp_cls"
                           A   327    ;   37	
                           A   328    ;   38	void vdp_cursorHome()
                           A   329    ;   39	{
0404A4                     A   330    _vdp_cursorHome:
                           A   331    .DEFINE "_vdp_cursorHome"
                           A   332    
                           A   333    .VALUE _vdp_cursorHome
                           A   334    
                           A   335    .CLASS 2
                           A   336    
                           A   337    .TYPE 65
                           A   338    
                           A   339    .ENDEF
                           A   340    
                           A   341    .BEGFUNC "vdp_cursorHome",39,"_vdp_cursorHome"
                           A   342    
0404A4 DDE5                A   343    	PUSH	IX
0404A6 DD210000 00         A   344    	LD	IX,0
0404AB DD39                A   345    	ADD	IX,SP
                           A   346    ;   40	    putch(30);
                           A   347    .LINE 40
                           A   348    
0404AD 011E0000            A   349    	LD	BC,30
0404B1 C5                  A   350    	PUSH	BC
0404B2 CD C5 0E 04         A   351    	CALL	_putch
0404B6 C1                  A   352    	POP	BC
                           A   353    ;   41	}
                           A   354    .LINE 41
                           A   355    
0404B7 DDF9                A   356    	LD	SP,IX
0404B9 DDE1                A   357    	POP	IX
0404BB C9                  A   358    	RET	
                           A   359    
                           A   360    
                           A   361    ;**************************** _vdp_cursorHome *
                           A   362    ;Name                         Addr/Register   S
                           A   363    ;_putch                              IMPORT  --
                           A   364    
                           A   365    
                           A   366    ; Stack Frame Size: 6 (bytes)
                           A   367    ;       Spill Code: 0 (instruction)
                           A   368    
                           A   369    
                           A   370    .ENDFUNC "vdp_cursorHome",41,"_vdp_cursorHome"
                           A   371    ;   42	
                           A   372    ;   43	void vdp_cursorUp()
                           A   373    ;   44	{
0404BC                     A   374    _vdp_cursorUp:
                           A   375    .DEFINE "_vdp_cursorUp"
                           A   376    
                           A   377    .VALUE _vdp_cursorUp
                           A   378    
                           A   379    .CLASS 2
                           A   380    
                           A   381    .TYPE 65
                           A   382    
                           A   383    .ENDEF
                           A   384    
                           A   385    .BEGFUNC "vdp_cursorUp",44,"_vdp_cursorUp"
                           A   386    
0404BC DDE5                A   387    	PUSH	IX
0404BE DD210000 00         A   388    	LD	IX,0
0404C3 DD39                A   389    	ADD	IX,SP
                           A   390    ;   45	    putch(11);
                           A   391    .LINE 45
                           A   392    
0404C5 010B0000            A   393    	LD	BC,11
0404C9 C5                  A   394    	PUSH	BC
0404CA CD C5 0E 04         A   395    	CALL	_putch
0404CE C1                  A   396    	POP	BC
                           A   397    ;   46	}
                           A   398    .LINE 46
                           A   399    
0404CF DDF9                A   400    	LD	SP,IX
0404D1 DDE1                A   401    	POP	IX
0404D3 C9                  A   402    	RET	
                           A   403    
                           A   404    
                           A   405    ;**************************** _vdp_cursorUp ***
                           A   406    ;Name                         Addr/Register   S
                           A   407    ;_putch                              IMPORT  --
                           A   408    
                           A   409    
                           A   410    ; Stack Frame Size: 6 (bytes)
                           A   411    ;       Spill Code: 0 (instruction)
                           A   412    
                           A   413    
                           A   414    .ENDFUNC "vdp_cursorUp",46,"_vdp_cursorUp"
                           A   415    ;   47	
                           A   416    ;   48	void vdp_cursorGoto(unsigned char x, un
                           A   417    ;   49	{
0404D4                     A   418    _vdp_cursorGoto:
                           A   419    .DEFINE "_vdp_cursorGoto"
                           A   420    
                           A   421    .VALUE _vdp_cursorGoto
                           A   422    
                           A   423    .CLASS 2
                           A   424    
                           A   425    .TYPE 65
                           A   426    
                           A   427    .ENDEF
                           A   428    
                           A   429    .BEGFUNC "vdp_cursorGoto",49,"_vdp_cursorGoto"
                           A   430    
                           A   431    .LINE 49
                           A   432    
                           A   433    .DEFINE "x"
                           A   434    
                           A   435    .CLASS 65
                           A   436    
                           A   437    .VALUE 6
                           A   438    
                           A   439    .TYPE 12
                           A   440    
                           A   441    .ENDEF
                           A   442    
                           A   443    .DEFINE "y"
                           A   444    
                           A   445    .CLASS 65
                           A   446    
                           A   447    .VALUE 9
                           A   448    
                           A   449    .TYPE 12
                           A   450    
                           A   451    .ENDEF
                           A   452    
0404D4 DDE5                A   453    	PUSH	IX
0404D6 DD210000 00         A   454    	LD	IX,0
0404DB DD39                A   455    	ADD	IX,SP
                           A   456    ;   50	    putch(31); // TAB
                           A   457    .LINE 50
                           A   458    
0404DD 011F0000            A   459    	LD	BC,31
0404E1 C5                  A   460    	PUSH	BC
0404E2 CD C5 0E 04         A   461    	CALL	_putch
0404E6 C1                  A   462    	POP	BC
                           A   463    ;   51	    putch(x);
                           A   464    .LINE 51
                           A   465    
0404E7 DD7E06              A   466    	LD	A,(IX+%6)
0404EA B7ED62              A   467    	UEXT	HL
0404ED 6F                  A   468    	LD	L,A
0404EE E5                  A   469    	PUSH	HL
0404EF CD C5 0E 04         A   470    	CALL	_putch
0404F3 C1                  A   471    	POP	BC
                           A   472    ;   52	    putch(y);
                           A   473    .LINE 52
                           A   474    
0404F4 DD7E09              A   475    	LD	A,(IX+%9)
0404F7 B7ED62              A   476    	UEXT	HL
0404FA 6F                  A   477    	LD	L,A
0404FB E5                  A   478    	PUSH	HL
0404FC CD C5 0E 04         A   479    	CALL	_putch
040500 C1                  A   480    	POP	BC
                           A   481    ;   53	}
                           A   482    .LINE 53
                           A   483    
040501 DDF9                A   484    	LD	SP,IX
040503 DDE1                A   485    	POP	IX
040505 C9                  A   486    	RET	
                           A   487    
                           A   488    
                           A   489    ;**************************** _vdp_cursorGoto *
                           A   490    ;Name                         Addr/Register   S
                           A   491    ;_putch                              IMPORT  --
                           A   492    ;y                                     IX+9    
                           A   493    ;x                                     IX+6    
                           A   494    
                           A   495    
                           A   496    ; Stack Frame Size: 12 (bytes)
                           A   497    ;       Spill Code: 0 (instruction)
                           A   498    
                           A   499    
                           A   500    .ENDFUNC "vdp_cursorGoto",53,"_vdp_cursorGoto"
                           A   501    ;   54	
                           A   502    ;   55	void vdp_colour(unsigned char foregroun
                           A   503    ;   56	{
040506                     A   504    _vdp_colour:
                           A   505    .DEFINE "_vdp_colour"
                           A   506    
                           A   507    .VALUE _vdp_colour
                           A   508    
                           A   509    .CLASS 2
                           A   510    
                           A   511    .TYPE 65
                           A   512    
                           A   513    .ENDEF
                           A   514    
                           A   515    .BEGFUNC "vdp_colour",56,"_vdp_colour"
                           A   516    
                           A   517    .LINE 56
                           A   518    
                           A   519    .DEFINE "foreground"
                           A   520    
                           A   521    .CLASS 65
                           A   522    
                           A   523    .VALUE 6
                           A   524    
                           A   525    .TYPE 12
                           A   526    
                           A   527    .ENDEF
                           A   528    
                           A   529    .DEFINE "r"
                           A   530    
                           A   531    .CLASS 65
                           A   532    
                           A   533    .VALUE 9
                           A   534    
                           A   535    .TYPE 12
                           A   536    
                           A   537    .ENDEF
                           A   538    
                           A   539    .DEFINE "g"
                           A   540    
                           A   541    .CLASS 65
                           A   542    
                           A   543    .VALUE 12
                           A   544    
                           A   545    .TYPE 12
                           A   546    
                           A   547    .ENDEF
                           A   548    
                           A   549    .DEFINE "b"
                           A   550    
                           A   551    .CLASS 65
                           A   552    
                           A   553    .VALUE 15
                           A   554    
                           A   555    .TYPE 12
                           A   556    
                           A   557    .ENDEF
                           A   558    
040506 DDE5                A   559    	PUSH	IX
040508 DD210000 00         A   560    	LD	IX,0
04050D DD39                A   561    	ADD	IX,SP
04050F C5                  A   562    	PUSH	BC
                           A   563    ;   57	    putch(17); // COLOUR
                           A   564    .LINE 57
                           A   565    
040510 01110000            A   566    	LD	BC,17
040514 C5                  A   567    	PUSH	BC
040515 CD C5 0E 04         A   568    	CALL	_putch
040519 C1                  A   569    	POP	BC
                           A   570    ;   58	    putch(!foreground);
                           A   571    .LINE 58
                           A   572    
04051A DD7E06              A   573    	LD	A,(IX+%6)
04051D B7                  A   574    	OR	A,A
04051E 20 09               A   575    	JR	NZ,L_8
040520 01010000            A   576    	LD	BC,1
040524 DD0FFD              A   577    	LD	(IX+%FFFFFFFD),BC
040527 18 07               A   578    	JR	L_9
040529                     A   579    L_8:
040529 01000000            A   580    	LD	BC,0
04052D DD0FFD              A   581    	LD	(IX+%FFFFFFFD),BC
040530                     A   582    L_9:
040530 DD07FD              A   583    	LD	BC,(IX+%FFFFFFFD)
040533 C5                  A   584    	PUSH	BC
040534 CD C5 0E 04         A   585    	CALL	_putch
040538 C1                  A   586    	POP	BC
                           A   587    ;   59	    putch(r);
                           A   588    .LINE 59
                           A   589    
040539 DD7E09              A   590    	LD	A,(IX+%9)
04053C B7ED62              A   591    	UEXT	HL
04053F 6F                  A   592    	LD	L,A
040540 E5                  A   593    	PUSH	HL
040541 CD C5 0E 04         A   594    	CALL	_putch
040545 C1                  A   595    	POP	BC
                           A   596    ;   60	    putch(g);
                           A   597    .LINE 60
                           A   598    
040546 DD7E0C              A   599    	LD	A,(IX+%C)
040549 B7ED62              A   600    	UEXT	HL
04054C 6F                  A   601    	LD	L,A
04054D E5                  A   602    	PUSH	HL
04054E CD C5 0E 04         A   603    	CALL	_putch
040552 C1                  A   604    	POP	BC
                           A   605    ;   61	    putch(b);
                           A   606    .LINE 61
                           A   607    
040553 DD7E0F              A   608    	LD	A,(IX+%F)
040556 B7ED62              A   609    	UEXT	HL
040559 6F                  A   610    	LD	L,A
04055A E5                  A   611    	PUSH	HL
04055B CD C5 0E 04         A   612    	CALL	_putch
04055F C1                  A   613    	POP	BC
                           A   614    ;   62	}
                           A   615    .LINE 62
                           A   616    
040560 DDF9                A   617    	LD	SP,IX
040562 DDE1                A   618    	POP	IX
040564 C9                  A   619    	RET	
                           A   620    
                           A   621    
                           A   622    ;**************************** _vdp_colour *****
                           A   623    ;Name                         Addr/Register   S
                           A   624    ;_putch                              IMPORT  --
                           A   625    ;temp10                                IX-3    
                           A   626    ;b                                    IX+15    
                           A   627    ;g                                    IX+12    
                           A   628    ;r                                     IX+9    
                           A   629    ;foreground                            IX+6    
                           A   630    
                           A   631    
                           A   632    ; Stack Frame Size: 21 (bytes)
                           A   633    ;       Spill Code: 0 (instruction)
                           A   634    
                           A   635    
                           A   636    .ENDFUNC "vdp_colour",62,"_vdp_colour"
                           A   637    ;   63	
                           A   638    ;   64	void vdp_fgcolour(unsigned char r, unsi
                           A   639    ;   65	{
040565                     A   640    _vdp_fgcolour:
                           A   641    .DEFINE "_vdp_fgcolour"
                           A   642    
                           A   643    .VALUE _vdp_fgcolour
                           A   644    
                           A   645    .CLASS 2
                           A   646    
                           A   647    .TYPE 65
                           A   648    
                           A   649    .ENDEF
                           A   650    
                           A   651    .BEGFUNC "vdp_fgcolour",65,"_vdp_fgcolour"
                           A   652    
                           A   653    .LINE 65
                           A   654    
                           A   655    .DEFINE "r"
                           A   656    
                           A   657    .CLASS 65
                           A   658    
                           A   659    .VALUE 6
                           A   660    
                           A   661    .TYPE 12
                           A   662    
                           A   663    .ENDEF
                           A   664    
                           A   665    .DEFINE "g"
                           A   666    
                           A   667    .CLASS 65
                           A   668    
                           A   669    .VALUE 9
                           A   670    
                           A   671    .TYPE 12
                           A   672    
                           A   673    .ENDEF
                           A   674    
                           A   675    .DEFINE "b"
                           A   676    
                           A   677    .CLASS 65
                           A   678    
                           A   679    .VALUE 12
                           A   680    
                           A   681    .TYPE 12
                           A   682    
                           A   683    .ENDEF
                           A   684    
040565 DDE5                A   685    	PUSH	IX
040567 DD210000 00         A   686    	LD	IX,0
04056C DD39                A   687    	ADD	IX,SP
                           A   688    ;   66	    vdp_colour(1,r,g,b);
                           A   689    .LINE 66
                           A   690    
04056E DD4E0C              A   691    	LD	C,(IX+%C)
040571 0600                A   692    	LD	B,%0
040573 C5                  A   693    	PUSH	BC
040574 DD4E09              A   694    	LD	C,(IX+%9)
040577 C5                  A   695    	PUSH	BC
040578 DD4E06              A   696    	LD	C,(IX+%6)
04057B C5                  A   697    	PUSH	BC
04057C 01010000            A   698    	LD	BC,1
040580 C5                  A   699    	PUSH	BC
040581 CD 06 05 04         A   700    	CALL	_vdp_colour
040585 C1                  A   701    	POP	BC
040586 C1                  A   702    	POP	BC
040587 C1                  A   703    	POP	BC
040588 C1                  A   704    	POP	BC
                           A   705    ;   67	}
                           A   706    .LINE 67
                           A   707    
040589 DDF9                A   708    	LD	SP,IX
04058B DDE1                A   709    	POP	IX
04058D C9                  A   710    	RET	
                           A   711    
                           A   712    
                           A   713    ;**************************** _vdp_fgcolour ***
                           A   714    ;Name                         Addr/Register   S
                           A   715    ;b                                    IX+12    
                           A   716    ;g                                     IX+9    
                           A   717    ;r                                     IX+6    
                           A   718    
                           A   719    
                           A   720    ; Stack Frame Size: 15 (bytes)
                           A   721    ;       Spill Code: 0 (instruction)
                           A   722    
                           A   723    
                           A   724    .ENDFUNC "vdp_fgcolour",67,"_vdp_fgcolour"
                           A   725    ;   68	
                           A   726    ;   69	void vdp_bgcolour(unsigned char r, unsi
                           A   727    ;   70	{
04058E                     A   728    _vdp_bgcolour:
                           A   729    .DEFINE "_vdp_bgcolour"
                           A   730    
                           A   731    .VALUE _vdp_bgcolour
                           A   732    
                           A   733    .CLASS 2
                           A   734    
                           A   735    .TYPE 65
                           A   736    
                           A   737    .ENDEF
                           A   738    
                           A   739    .BEGFUNC "vdp_bgcolour",70,"_vdp_bgcolour"
                           A   740    
                           A   741    .LINE 70
                           A   742    
                           A   743    .DEFINE "r"
                           A   744    
                           A   745    .CLASS 65
                           A   746    
                           A   747    .VALUE 6
                           A   748    
                           A   749    .TYPE 12
                           A   750    
                           A   751    .ENDEF
                           A   752    
                           A   753    .DEFINE "g"
                           A   754    
                           A   755    .CLASS 65
                           A   756    
                           A   757    .VALUE 9
                           A   758    
                           A   759    .TYPE 12
                           A   760    
                           A   761    .ENDEF
                           A   762    
                           A   763    .DEFINE "b"
                           A   764    
                           A   765    .CLASS 65
                           A   766    
                           A   767    .VALUE 12
                           A   768    
                           A   769    .TYPE 12
                           A   770    
                           A   771    .ENDEF
                           A   772    
04058E DDE5                A   773    	PUSH	IX
040590 DD210000 00         A   774    	LD	IX,0
040595 DD39                A   775    	ADD	IX,SP
                           A   776    ;   71	    vdp_colour(0,r,g,b);
                           A   777    .LINE 71
                           A   778    
040597 DD4E0C              A   779    	LD	C,(IX+%C)
04059A 0600                A   780    	LD	B,%0
04059C C5                  A   781    	PUSH	BC
04059D DD4E09              A   782    	LD	C,(IX+%9)
0405A0 C5                  A   783    	PUSH	BC
0405A1 DD4E06              A   784    	LD	C,(IX+%6)
0405A4 C5                  A   785    	PUSH	BC
0405A5 01000000            A   786    	LD	BC,0
0405A9 C5                  A   787    	PUSH	BC
0405AA CD 06 05 04         A   788    	CALL	_vdp_colour
0405AE C1                  A   789    	POP	BC
0405AF C1                  A   790    	POP	BC
0405B0 C1                  A   791    	POP	BC
0405B1 C1                  A   792    	POP	BC
                           A   793    ;   72	}
                           A   794    .LINE 72
                           A   795    
0405B2 DDF9                A   796    	LD	SP,IX
0405B4 DDE1                A   797    	POP	IX
0405B6 C9                  A   798    	RET	
                           A   799    
                           A   800    
                           A   801    ;**************************** _vdp_bgcolour ***
                           A   802    ;Name                         Addr/Register   S
                           A   803    ;b                                    IX+12    
                           A   804    ;g                                     IX+9    
                           A   805    ;r                                     IX+6    
                           A   806    
                           A   807    
                           A   808    ; Stack Frame Size: 15 (bytes)
                           A   809    ;       Spill Code: 0 (instruction)
                           A   810    
                           A   811    
                           A   812    .ENDFUNC "vdp_bgcolour",72,"_vdp_bgcolour"
                           A   813    ;   73	
                           A   814    ;   74	//
                           A   815    ;   75	// Graphics functions
                           A   816    ;   76	//
                           A   817    ;   77	
                           A   818    ;   78	void vdp_clearGraphics()
                           A   819    ;   79	{
0405B7                     A   820    _vdp_clearGraphics:
                           A   821    .DEFINE "_vdp_clearGraphics"
                           A   822    
                           A   823    .VALUE _vdp_clearGraphics
                           A   824    
                           A   825    .CLASS 2
                           A   826    
                           A   827    .TYPE 65
                           A   828    
                           A   829    .ENDEF
                           A   830    
                           A   831    .BEGFUNC "vdp_clearGraphics",79,"_vdp_clearGrap
                           A   832    
0405B7 DDE5                A   833    	PUSH	IX
0405B9 DD210000 00         A   834    	LD	IX,0
0405BE DD39                A   835    	ADD	IX,SP
                           A   836    ;   80	    putch(16);    
                           A   837    .LINE 80
                           A   838    
0405C0 01100000            A   839    	LD	BC,16
0405C4 C5                  A   840    	PUSH	BC
0405C5 CD C5 0E 04         A   841    	CALL	_putch
0405C9 C1                  A   842    	POP	BC
                           A   843    ;   81	}
                           A   844    .LINE 81
                           A   845    
0405CA DDF9                A   846    	LD	SP,IX
0405CC DDE1                A   847    	POP	IX
0405CE C9                  A   848    	RET	
                           A   849    
                           A   850    
                           A   851    ;**************************** _vdp_clearGraphic
                           A   852    ;Name                         Addr/Register   S
                           A   853    ;_putch                              IMPORT  --
                           A   854    
                           A   855    
                           A   856    ; Stack Frame Size: 6 (bytes)
                           A   857    ;       Spill Code: 0 (instruction)
                           A   858    
                           A   859    
                           A   860    .ENDFUNC "vdp_clearGraphics",81,"_vdp_clearGrap
                           A   861    ;   82	
                           A   862    ;   83	void vdp_plotColour(unsigned char r, un
                           A   863    ;   84	{
0405CF                     A   864    _vdp_plotColour:
                           A   865    .DEFINE "_vdp_plotColour"
                           A   866    
                           A   867    .VALUE _vdp_plotColour
                           A   868    
                           A   869    .CLASS 2
                           A   870    
                           A   871    .TYPE 65
                           A   872    
                           A   873    .ENDEF
                           A   874    
                           A   875    .BEGFUNC "vdp_plotColour",84,"_vdp_plotColour"
                           A   876    
                           A   877    .LINE 84
                           A   878    
                           A   879    .DEFINE "r"
                           A   880    
                           A   881    .CLASS 65
                           A   882    
                           A   883    .VALUE 6
                           A   884    
                           A   885    .TYPE 12
                           A   886    
                           A   887    .ENDEF
                           A   888    
                           A   889    .DEFINE "g"
                           A   890    
                           A   891    .CLASS 65
                           A   892    
                           A   893    .VALUE 9
                           A   894    
                           A   895    .TYPE 12
                           A   896    
                           A   897    .ENDEF
                           A   898    
                           A   899    .DEFINE "b"
                           A   900    
                           A   901    .CLASS 65
                           A   902    
                           A   903    .VALUE 12
                           A   904    
                           A   905    .TYPE 12
                           A   906    
                           A   907    .ENDEF
                           A   908    
0405CF DDE5                A   909    	PUSH	IX
0405D1 DD210000 00         A   910    	LD	IX,0
0405D6 DD39                A   911    	ADD	IX,SP
                           A   912    ;   85	    putch(18); // GCOL
                           A   913    .LINE 85
                           A   914    
0405D8 01120000            A   915    	LD	BC,18
0405DC C5                  A   916    	PUSH	BC
0405DD CD C5 0E 04         A   917    	CALL	_putch
0405E1 C1                  A   918    	POP	BC
                           A   919    ;   86	    putch(0);
                           A   920    .LINE 86
                           A   921    
0405E2 01000000            A   922    	LD	BC,0
0405E6 C5                  A   923    	PUSH	BC
0405E7 CD C5 0E 04         A   924    	CALL	_putch
0405EB C1                  A   925    	POP	BC
                           A   926    ;   87	    putch(r);
                           A   927    .LINE 87
                           A   928    
0405EC DD7E06              A   929    	LD	A,(IX+%6)
0405EF B7ED62              A   930    	UEXT	HL
0405F2 6F                  A   931    	LD	L,A
0405F3 E5                  A   932    	PUSH	HL
0405F4 CD C5 0E 04         A   933    	CALL	_putch
0405F8 C1                  A   934    	POP	BC
                           A   935    ;   88	    putch(g);
                           A   936    .LINE 88
                           A   937    
0405F9 DD7E09              A   938    	LD	A,(IX+%9)
0405FC B7ED62              A   939    	UEXT	HL
0405FF 6F                  A   940    	LD	L,A
040600 E5                  A   941    	PUSH	HL
040601 CD C5 0E 04         A   942    	CALL	_putch
040605 C1                  A   943    	POP	BC
                           A   944    ;   89	    putch(b);
                           A   945    .LINE 89
                           A   946    
040606 DD7E0C              A   947    	LD	A,(IX+%C)
040609 B7ED62              A   948    	UEXT	HL
04060C 6F                  A   949    	LD	L,A
04060D E5                  A   950    	PUSH	HL
04060E CD C5 0E 04         A   951    	CALL	_putch
040612 C1                  A   952    	POP	BC
                           A   953    ;   90	}
                           A   954    .LINE 90
                           A   955    
040613 DDF9                A   956    	LD	SP,IX
040615 DDE1                A   957    	POP	IX
040617 C9                  A   958    	RET	
                           A   959    
                           A   960    
                           A   961    ;**************************** _vdp_plotColour *
                           A   962    ;Name                         Addr/Register   S
                           A   963    ;_putch                              IMPORT  --
                           A   964    ;b                                    IX+12    
                           A   965    ;g                                     IX+9    
                           A   966    ;r                                     IX+6    
                           A   967    
                           A   968    
                           A   969    ; Stack Frame Size: 15 (bytes)
                           A   970    ;       Spill Code: 0 (instruction)
                           A   971    
                           A   972    
                           A   973    .ENDFUNC "vdp_plotColour",90,"_vdp_plotColour"
                           A   974    ;   91	
                           A   975    ;   92	// internal function
                           A   976    ;   93	void vdp_plot(unsigned char mode, unsig
                           A   977    ;   94	{
040618                     A   978    _vdp_plot:
                           A   979    .DEFINE "_vdp_plot"
                           A   980    
                           A   981    .VALUE _vdp_plot
                           A   982    
                           A   983    .CLASS 2
                           A   984    
                           A   985    .TYPE 65
                           A   986    
                           A   987    .ENDEF
                           A   988    
                           A   989    .BEGFUNC "vdp_plot",94,"_vdp_plot"
                           A   990    
                           A   991    .LINE 94
                           A   992    
                           A   993    .DEFINE "mode"
                           A   994    
                           A   995    .CLASS 65
                           A   996    
                           A   997    .VALUE 6
                           A   998    
                           A   999    .TYPE 12
                           A  1000    
                           A  1001    .ENDEF
                           A  1002    
                           A  1003    .DEFINE "x"
                           A  1004    
                           A  1005    .CLASS 65
                           A  1006    
                           A  1007    .VALUE 9
                           A  1008    
                           A  1009    .TYPE 14
                           A  1010    
                           A  1011    .ENDEF
                           A  1012    
                           A  1013    .DEFINE "y"
                           A  1014    
                           A  1015    .CLASS 65
                           A  1016    
                           A  1017    .VALUE 12
                           A  1018    
                           A  1019    .TYPE 14
                           A  1020    
                           A  1021    .ENDEF
                           A  1022    
040618 DDE5                A  1023    	PUSH	IX
04061A DD210000 00         A  1024    	LD	IX,0
04061F DD39                A  1025    	ADD	IX,SP
                           A  1026    ;   95	    putch(25); // PLOT
                           A  1027    .LINE 95
                           A  1028    
040621 01190000            A  1029    	LD	BC,25
040625 C5                  A  1030    	PUSH	BC
040626 CD C5 0E 04         A  1031    	CALL	_putch
04062A C1                  A  1032    	POP	BC
                           A  1033    ;   96	    putch(mode);
                           A  1034    .LINE 96
                           A  1035    
04062B DD7E06              A  1036    	LD	A,(IX+%6)
04062E B7ED62              A  1037    	UEXT	HL
040631 6F                  A  1038    	LD	L,A
040632 E5                  A  1039    	PUSH	HL
040633 CD C5 0E 04         A  1040    	CALL	_putch
040637 C1                  A  1041    	POP	BC
                           A  1042    ;   97	    putch(x & 0xFF);
                           A  1043    .LINE 97
                           A  1044    
040638 DD7E09              A  1045    	LD	A,(IX+%9)
04063B B7ED62              A  1046    	UEXT	HL
04063E 6F                  A  1047    	LD	L,A
04063F E5                  A  1048    	PUSH	HL
040640 CD C5 0E 04         A  1049    	CALL	_putch
040644 C1                  A  1050    	POP	BC
                           A  1051    ;   98	    putch(x >> 8);
                           A  1052    .LINE 98
                           A  1053    
040645 DD2709              A  1054    	LD	HL,(IX+%9)
040648 3E08                A  1055    	LD	A,%8
04064A CD 7A 17 04         A  1056    	CALL	__ishru_b
04064E E5                  A  1057    	PUSH	HL
04064F CD C5 0E 04         A  1058    	CALL	_putch
040653 C1                  A  1059    	POP	BC
                           A  1060    ;   99	    putch(y & 0xFF);
                           A  1061    .LINE 99
                           A  1062    
040654 DD7E0C              A  1063    	LD	A,(IX+%C)
040657 B7ED62              A  1064    	UEXT	HL
04065A 6F                  A  1065    	LD	L,A
04065B E5                  A  1066    	PUSH	HL
04065C CD C5 0E 04         A  1067    	CALL	_putch
040660 C1                  A  1068    	POP	BC
                           A  1069    ;  100	    putch(y >> 8);
                           A  1070    .LINE 100
                           A  1071    
040661 DD270C              A  1072    	LD	HL,(IX+%C)
040664 3E08                A  1073    	LD	A,%8
040666 CD 7A 17 04         A  1074    	CALL	__ishru_b
04066A E5                  A  1075    	PUSH	HL
04066B CD C5 0E 04         A  1076    	CALL	_putch
04066F C1                  A  1077    	POP	BC
                           A  1078    ;  101	}
                           A  1079    .LINE 101
                           A  1080    
040670 DDF9                A  1081    	LD	SP,IX
040672 DDE1                A  1082    	POP	IX
040674 C9                  A  1083    	RET	
                           A  1084    
                           A  1085    
                           A  1086    ;**************************** _vdp_plot *******
                           A  1087    ;Name                         Addr/Register   S
                           A  1088    ;_putch                              IMPORT  --
                           A  1089    ;y                                    IX+12    
                           A  1090    ;x                                     IX+9    
                           A  1091    ;mode                                  IX+6    
                           A  1092    
                           A  1093    
                           A  1094    ; Stack Frame Size: 15 (bytes)
                           A  1095    ;       Spill Code: 0 (instruction)
                           A  1096    
                           A  1097    
                           A  1098    .ENDFUNC "vdp_plot",101,"_vdp_plot"
                           A  1099    ;  102	
                           A  1100    ;  103	void vdp_plotMoveTo(unsigned int x, uns
                           A  1101    ;  104	{
040675                     A  1102    _vdp_plotMoveTo:
                           A  1103    .DEFINE "_vdp_plotMoveTo"
                           A  1104    
                           A  1105    .VALUE _vdp_plotMoveTo
                           A  1106    
                           A  1107    .CLASS 2
                           A  1108    
                           A  1109    .TYPE 65
                           A  1110    
                           A  1111    .ENDEF
                           A  1112    
                           A  1113    .BEGFUNC "vdp_plotMoveTo",104,"_vdp_plotMoveTo"
                           A  1114    
                           A  1115    .LINE 104
                           A  1116    
                           A  1117    .DEFINE "x"
                           A  1118    
                           A  1119    .CLASS 65
                           A  1120    
                           A  1121    .VALUE 6
                           A  1122    
                           A  1123    .TYPE 14
                           A  1124    
                           A  1125    .ENDEF
                           A  1126    
                           A  1127    .DEFINE "y"
                           A  1128    
                           A  1129    .CLASS 65
                           A  1130    
                           A  1131    .VALUE 9
                           A  1132    
                           A  1133    .TYPE 14
                           A  1134    
                           A  1135    .ENDEF
                           A  1136    
040675 DDE5                A  1137    	PUSH	IX
040677 DD210000 00         A  1138    	LD	IX,0
04067C DD39                A  1139    	ADD	IX,SP
                           A  1140    ;  105		vdp_plot(0x04,x,y);
                           A  1141    .LINE 105
                           A  1142    
04067E DD0709              A  1143    	LD	BC,(IX+%9)
040681 C5                  A  1144    	PUSH	BC
040682 DD0706              A  1145    	LD	BC,(IX+%6)
040685 C5                  A  1146    	PUSH	BC
040686 01040000            A  1147    	LD	BC,4
04068A C5                  A  1148    	PUSH	BC
04068B CD 18 06 04         A  1149    	CALL	_vdp_plot
04068F C1                  A  1150    	POP	BC
040690 C1                  A  1151    	POP	BC
040691 C1                  A  1152    	POP	BC
                           A  1153    ;  106	}
                           A  1154    .LINE 106
                           A  1155    
040692 DDF9                A  1156    	LD	SP,IX
040694 DDE1                A  1157    	POP	IX
040696 C9                  A  1158    	RET	
                           A  1159    
                           A  1160    
                           A  1161    ;**************************** _vdp_plotMoveTo *
                           A  1162    ;Name                         Addr/Register   S
                           A  1163    ;y                                     IX+9    
                           A  1164    ;x                                     IX+6    
                           A  1165    
                           A  1166    
                           A  1167    ; Stack Frame Size: 12 (bytes)
                           A  1168    ;       Spill Code: 0 (instruction)
                           A  1169    
                           A  1170    
                           A  1171    .ENDFUNC "vdp_plotMoveTo",106,"_vdp_plotMoveTo"
                           A  1172    ;  107	
                           A  1173    ;  108	void vdp_plotLineTo(unsigned int x, uns
                           A  1174    ;  109	{
040697                     A  1175    _vdp_plotLineTo:
                           A  1176    .DEFINE "_vdp_plotLineTo"
                           A  1177    
                           A  1178    .VALUE _vdp_plotLineTo
                           A  1179    
                           A  1180    .CLASS 2
                           A  1181    
                           A  1182    .TYPE 65
                           A  1183    
                           A  1184    .ENDEF
                           A  1185    
                           A  1186    .BEGFUNC "vdp_plotLineTo",109,"_vdp_plotLineTo"
                           A  1187    
                           A  1188    .LINE 109
                           A  1189    
                           A  1190    .DEFINE "x"
                           A  1191    
                           A  1192    .CLASS 65
                           A  1193    
                           A  1194    .VALUE 6
                           A  1195    
                           A  1196    .TYPE 14
                           A  1197    
                           A  1198    .ENDEF
                           A  1199    
                           A  1200    .DEFINE "y"
                           A  1201    
                           A  1202    .CLASS 65
                           A  1203    
                           A  1204    .VALUE 9
                           A  1205    
                           A  1206    .TYPE 14
                           A  1207    
                           A  1208    .ENDEF
                           A  1209    
040697 DDE5                A  1210    	PUSH	IX
040699 DD210000 00         A  1211    	LD	IX,0
04069E DD39                A  1212    	ADD	IX,SP
                           A  1213    ;  110		vdp_plot(0x05,x,y);
                           A  1214    .LINE 110
                           A  1215    
0406A0 DD0709              A  1216    	LD	BC,(IX+%9)
0406A3 C5                  A  1217    	PUSH	BC
0406A4 DD0706              A  1218    	LD	BC,(IX+%6)
0406A7 C5                  A  1219    	PUSH	BC
0406A8 01050000            A  1220    	LD	BC,5
0406AC C5                  A  1221    	PUSH	BC
0406AD CD 18 06 04         A  1222    	CALL	_vdp_plot
0406B1 C1                  A  1223    	POP	BC
0406B2 C1                  A  1224    	POP	BC
0406B3 C1                  A  1225    	POP	BC
                           A  1226    ;  111	}
                           A  1227    .LINE 111
                           A  1228    
0406B4 DDF9                A  1229    	LD	SP,IX
0406B6 DDE1                A  1230    	POP	IX
0406B8 C9                  A  1231    	RET	
                           A  1232    
                           A  1233    
                           A  1234    ;**************************** _vdp_plotLineTo *
                           A  1235    ;Name                         Addr/Register   S
                           A  1236    ;y                                     IX+9    
                           A  1237    ;x                                     IX+6    
                           A  1238    
                           A  1239    
                           A  1240    ; Stack Frame Size: 12 (bytes)
                           A  1241    ;       Spill Code: 0 (instruction)
                           A  1242    
                           A  1243    
                           A  1244    .ENDFUNC "vdp_plotLineTo",111,"_vdp_plotLineTo"
                           A  1245    ;  112	
                           A  1246    ;  113	void vdp_plotPoint(unsigned int x, unsi
                           A  1247    ;  114	{
0406B9                     A  1248    _vdp_plotPoint:
                           A  1249    .DEFINE "_vdp_plotPoint"
                           A  1250    
                           A  1251    .VALUE _vdp_plotPoint
                           A  1252    
                           A  1253    .CLASS 2
                           A  1254    
                           A  1255    .TYPE 65
                           A  1256    
                           A  1257    .ENDEF
                           A  1258    
                           A  1259    .BEGFUNC "vdp_plotPoint",114,"_vdp_plotPoint"
                           A  1260    
                           A  1261    .LINE 114
                           A  1262    
                           A  1263    .DEFINE "x"
                           A  1264    
                           A  1265    .CLASS 65
                           A  1266    
                           A  1267    .VALUE 6
                           A  1268    
                           A  1269    .TYPE 14
                           A  1270    
                           A  1271    .ENDEF
                           A  1272    
                           A  1273    .DEFINE "y"
                           A  1274    
                           A  1275    .CLASS 65
                           A  1276    
                           A  1277    .VALUE 9
                           A  1278    
                           A  1279    .TYPE 14
                           A  1280    
                           A  1281    .ENDEF
                           A  1282    
0406B9 DDE5                A  1283    	PUSH	IX
0406BB DD210000 00         A  1284    	LD	IX,0
0406C0 DD39                A  1285    	ADD	IX,SP
                           A  1286    ;  115		vdp_plot(0x40,x,y);
                           A  1287    .LINE 115
                           A  1288    
0406C2 DD0709              A  1289    	LD	BC,(IX+%9)
0406C5 C5                  A  1290    	PUSH	BC
0406C6 DD0706              A  1291    	LD	BC,(IX+%6)
0406C9 C5                  A  1292    	PUSH	BC
0406CA 01400000            A  1293    	LD	BC,64
0406CE C5                  A  1294    	PUSH	BC
0406CF CD 18 06 04         A  1295    	CALL	_vdp_plot
0406D3 C1                  A  1296    	POP	BC
0406D4 C1                  A  1297    	POP	BC
0406D5 C1                  A  1298    	POP	BC
                           A  1299    ;  116	}
                           A  1300    .LINE 116
                           A  1301    
0406D6 DDF9                A  1302    	LD	SP,IX
0406D8 DDE1                A  1303    	POP	IX
0406DA C9                  A  1304    	RET	
                           A  1305    
                           A  1306    
                           A  1307    ;**************************** _vdp_plotPoint **
                           A  1308    ;Name                         Addr/Register   S
                           A  1309    ;y                                     IX+9    
                           A  1310    ;x                                     IX+6    
                           A  1311    
                           A  1312    
                           A  1313    ; Stack Frame Size: 12 (bytes)
                           A  1314    ;       Spill Code: 0 (instruction)
                           A  1315    
                           A  1316    
                           A  1317    .ENDFUNC "vdp_plotPoint",116,"_vdp_plotPoint"
                           A  1318    ;  117	
                           A  1319    ;  118	void vdp_plotTriangle(unsigned int x, u
                           A  1320    ;  119	{
0406DB                     A  1321    _vdp_plotTriangle:
                           A  1322    .DEFINE "_vdp_plotTriangle"
                           A  1323    
                           A  1324    .VALUE _vdp_plotTriangle
                           A  1325    
                           A  1326    .CLASS 2
                           A  1327    
                           A  1328    .TYPE 65
                           A  1329    
                           A  1330    .ENDEF
                           A  1331    
                           A  1332    .BEGFUNC "vdp_plotTriangle",119,"_vdp_plotTrian
                           A  1333    
                           A  1334    .LINE 119
                           A  1335    
                           A  1336    .DEFINE "x"
                           A  1337    
                           A  1338    .CLASS 65
                           A  1339    
                           A  1340    .VALUE 6
                           A  1341    
                           A  1342    .TYPE 14
                           A  1343    
                           A  1344    .ENDEF
                           A  1345    
                           A  1346    .DEFINE "y"
                           A  1347    
                           A  1348    .CLASS 65
                           A  1349    
                           A  1350    .VALUE 9
                           A  1351    
                           A  1352    .TYPE 14
                           A  1353    
                           A  1354    .ENDEF
                           A  1355    
0406DB DDE5                A  1356    	PUSH	IX
0406DD DD210000 00         A  1357    	LD	IX,0
0406E2 DD39                A  1358    	ADD	IX,SP
                           A  1359    ;  120		vdp_plot(0x50,x,y);
                           A  1360    .LINE 120
                           A  1361    
0406E4 DD0709              A  1362    	LD	BC,(IX+%9)
0406E7 C5                  A  1363    	PUSH	BC
0406E8 DD0706              A  1364    	LD	BC,(IX+%6)
0406EB C5                  A  1365    	PUSH	BC
0406EC 01500000            A  1366    	LD	BC,80
0406F0 C5                  A  1367    	PUSH	BC
0406F1 CD 18 06 04         A  1368    	CALL	_vdp_plot
0406F5 C1                  A  1369    	POP	BC
0406F6 C1                  A  1370    	POP	BC
0406F7 C1                  A  1371    	POP	BC
                           A  1372    ;  121	}
                           A  1373    .LINE 121
                           A  1374    
0406F8 DDF9                A  1375    	LD	SP,IX
0406FA DDE1                A  1376    	POP	IX
0406FC C9                  A  1377    	RET	
                           A  1378    
                           A  1379    
                           A  1380    ;**************************** _vdp_plotTriangle
                           A  1381    ;Name                         Addr/Register   S
                           A  1382    ;y                                     IX+9    
                           A  1383    ;x                                     IX+6    
                           A  1384    
                           A  1385    
                           A  1386    ; Stack Frame Size: 12 (bytes)
                           A  1387    ;       Spill Code: 0 (instruction)
                           A  1388    
                           A  1389    
                           A  1390    .ENDFUNC "vdp_plotTriangle",121,"_vdp_plotTrian
                           A  1391    ;  122	
                           A  1392    ;  123	void vdp_plotCircleRadius(unsigned int 
                           A  1393    ;  124	{
0406FD                     A  1394    _vdp_plotCircleRadius:
                           A  1395    .DEFINE "_vdp_plotCircleRadius"
                           A  1396    
                           A  1397    .VALUE _vdp_plotCircleRadius
                           A  1398    
                           A  1399    .CLASS 2
                           A  1400    
                           A  1401    .TYPE 65
                           A  1402    
                           A  1403    .ENDEF
                           A  1404    
                           A  1405    .BEGFUNC "vdp_plotCircleRadius",124,"_vdp_plotC
                           A  1406    
                           A  1407    .LINE 124
                           A  1408    
                           A  1409    .DEFINE "r"
                           A  1410    
                           A  1411    .CLASS 65
                           A  1412    
                           A  1413    .VALUE 6
                           A  1414    
                           A  1415    .TYPE 14
                           A  1416    
                           A  1417    .ENDEF
                           A  1418    
0406FD DDE5                A  1419    	PUSH	IX
0406FF DD210000 00         A  1420    	LD	IX,0
040704 DD39                A  1421    	ADD	IX,SP
                           A  1422    ;  125		vdp_plot(0x90,r,0);
                           A  1423    .LINE 125
                           A  1424    
040706 01000000            A  1425    	LD	BC,0
04070A C5                  A  1426    	PUSH	BC
04070B DD0706              A  1427    	LD	BC,(IX+%6)
04070E C5                  A  1428    	PUSH	BC
04070F 01900000            A  1429    	LD	BC,144
040713 C5                  A  1430    	PUSH	BC
040714 CD 18 06 04         A  1431    	CALL	_vdp_plot
040718 C1                  A  1432    	POP	BC
040719 C1                  A  1433    	POP	BC
04071A C1                  A  1434    	POP	BC
                           A  1435    ;  126	}
                           A  1436    .LINE 126
                           A  1437    
04071B DDF9                A  1438    	LD	SP,IX
04071D DDE1                A  1439    	POP	IX
04071F C9                  A  1440    	RET	
                           A  1441    
                           A  1442    
                           A  1443    ;**************************** _vdp_plotCircleRa
                           A  1444    ;Name                         Addr/Register   S
                           A  1445    ;r                                     IX+6    
                           A  1446    
                           A  1447    
                           A  1448    ; Stack Frame Size: 9 (bytes)
                           A  1449    ;       Spill Code: 0 (instruction)
                           A  1450    
                           A  1451    
                           A  1452    .ENDFUNC "vdp_plotCircleRadius",126,"_vdp_plotC
                           A  1453    ;  127	
                           A  1454    ;  128	void vdp_plotCircleCircumference(unsign
                           A  1455    ;  129	{
040720                     A  1456    _vdp_plotCircleCircumference:
                           A  1457    .DEFINE "_vdp_plotCircleCircumference"
                           A  1458    
                           A  1459    .VALUE _vdp_plotCircleCircumference
                           A  1460    
                           A  1461    .CLASS 2
                           A  1462    
                           A  1463    .TYPE 65
                           A  1464    
                           A  1465    .ENDEF
                           A  1466    
                           A  1467    .BEGFUNC "vdp_plotCircleCircumference",129,"_vd
                           A  1468    
                           A  1469    .LINE 129
                           A  1470    
                           A  1471    .DEFINE "x"
                           A  1472    
                           A  1473    .CLASS 65
                           A  1474    
                           A  1475    .VALUE 6
                           A  1476    
                           A  1477    .TYPE 14
                           A  1478    
                           A  1479    .ENDEF
                           A  1480    
                           A  1481    .DEFINE "y"
                           A  1482    
                           A  1483    .CLASS 65
                           A  1484    
                           A  1485    .VALUE 9
                           A  1486    
                           A  1487    .TYPE 14
                           A  1488    
                           A  1489    .ENDEF
                           A  1490    
040720 DDE5                A  1491    	PUSH	IX
040722 DD210000 00         A  1492    	LD	IX,0
040727 DD39                A  1493    	ADD	IX,SP
                           A  1494    ;  130		vdp_plot(0x95,x,y);
                           A  1495    .LINE 130
                           A  1496    
040729 DD0709              A  1497    	LD	BC,(IX+%9)
04072C C5                  A  1498    	PUSH	BC
04072D DD0706              A  1499    	LD	BC,(IX+%6)
040730 C5                  A  1500    	PUSH	BC
040731 01950000            A  1501    	LD	BC,149
040735 C5                  A  1502    	PUSH	BC
040736 CD 18 06 04         A  1503    	CALL	_vdp_plot
04073A C1                  A  1504    	POP	BC
04073B C1                  A  1505    	POP	BC
04073C C1                  A  1506    	POP	BC
                           A  1507    ;  131	}
                           A  1508    .LINE 131
                           A  1509    
04073D DDF9                A  1510    	LD	SP,IX
04073F DDE1                A  1511    	POP	IX
040741 C9                  A  1512    	RET	
                           A  1513    
                           A  1514    
                           A  1515    ;**************************** _vdp_plotCircleCi
                           A  1516    ;Name                         Addr/Register   S
                           A  1517    ;y                                     IX+9    
                           A  1518    ;x                                     IX+6    
                           A  1519    
                           A  1520    
                           A  1521    ; Stack Frame Size: 12 (bytes)
                           A  1522    ;       Spill Code: 0 (instruction)
                           A  1523    
                           A  1524    
                           A  1525    .ENDFUNC "vdp_plotCircleCircumference",131,"_vd
                           A  1526    ;  132	
                           A  1527    ;  133	void vdp_plotSetOrigin(unsigned int x, 
                           A  1528    ;  134	{
040742                     A  1529    _vdp_plotSetOrigin:
                           A  1530    .DEFINE "_vdp_plotSetOrigin"
                           A  1531    
                           A  1532    .VALUE _vdp_plotSetOrigin
                           A  1533    
                           A  1534    .CLASS 2
                           A  1535    
                           A  1536    .TYPE 65
                           A  1537    
                           A  1538    .ENDEF
                           A  1539    
                           A  1540    .BEGFUNC "vdp_plotSetOrigin",134,"_vdp_plotSetO
                           A  1541    
                           A  1542    .LINE 134
                           A  1543    
                           A  1544    .DEFINE "x"
                           A  1545    
                           A  1546    .CLASS 65
                           A  1547    
                           A  1548    .VALUE 6
                           A  1549    
                           A  1550    .TYPE 14
                           A  1551    
                           A  1552    .ENDEF
                           A  1553    
                           A  1554    .DEFINE "y"
                           A  1555    
                           A  1556    .CLASS 65
                           A  1557    
                           A  1558    .VALUE 9
                           A  1559    
                           A  1560    .TYPE 14
                           A  1561    
                           A  1562    .ENDEF
                           A  1563    
040742 DDE5                A  1564    	PUSH	IX
040744 DD210000 00         A  1565    	LD	IX,0
040749 DD39                A  1566    	ADD	IX,SP
                           A  1567    ;  135	    putch(29); //Graphics ORIGIN
                           A  1568    .LINE 135
                           A  1569    
04074B 011D0000            A  1570    	LD	BC,29
04074F C5                  A  1571    	PUSH	BC
040750 CD C5 0E 04         A  1572    	CALL	_putch
040754 C1                  A  1573    	POP	BC
                           A  1574    ;  136	    putch(x & 0xF);
                           A  1575    .LINE 136
                           A  1576    
040755 DD7E06              A  1577    	LD	A,(IX+%6)
040758 E60F                A  1578    	AND	A,%F
04075A B7ED62              A  1579    	UEXT	HL
04075D 6F                  A  1580    	LD	L,A
04075E E5                  A  1581    	PUSH	HL
04075F CD C5 0E 04         A  1582    	CALL	_putch
040763 C1                  A  1583    	POP	BC
                           A  1584    ;  137	    putch(x >> 8);
                           A  1585    .LINE 137
                           A  1586    
040764 DD2706              A  1587    	LD	HL,(IX+%6)
040767 3E08                A  1588    	LD	A,%8
040769 CD 7A 17 04         A  1589    	CALL	__ishru_b
04076D E5                  A  1590    	PUSH	HL
04076E CD C5 0E 04         A  1591    	CALL	_putch
040772 C1                  A  1592    	POP	BC
                           A  1593    ;  138	    putch(y & 0xF);
                           A  1594    .LINE 138
                           A  1595    
040773 DD7E09              A  1596    	LD	A,(IX+%9)
040776 E60F                A  1597    	AND	A,%F
040778 B7ED62              A  1598    	UEXT	HL
04077B 6F                  A  1599    	LD	L,A
04077C E5                  A  1600    	PUSH	HL
04077D CD C5 0E 04         A  1601    	CALL	_putch
040781 C1                  A  1602    	POP	BC
                           A  1603    ;  139	    putch(y >> 8);
                           A  1604    .LINE 139
                           A  1605    
040782 DD2709              A  1606    	LD	HL,(IX+%9)
040785 3E08                A  1607    	LD	A,%8
040787 CD 7A 17 04         A  1608    	CALL	__ishru_b
04078B E5                  A  1609    	PUSH	HL
04078C CD C5 0E 04         A  1610    	CALL	_putch
040790 C1                  A  1611    	POP	BC
                           A  1612    ;  140	}
                           A  1613    .LINE 140
                           A  1614    
040791 DDF9                A  1615    	LD	SP,IX
040793 DDE1                A  1616    	POP	IX
040795 C9                  A  1617    	RET	
                           A  1618    
                           A  1619    
                           A  1620    ;**************************** _vdp_plotSetOrigi
                           A  1621    ;Name                         Addr/Register   S
                           A  1622    ;_putch                              IMPORT  --
                           A  1623    ;y                                     IX+9    
                           A  1624    ;x                                     IX+6    
                           A  1625    
                           A  1626    
                           A  1627    ; Stack Frame Size: 12 (bytes)
                           A  1628    ;       Spill Code: 0 (instruction)
                           A  1629    
                           A  1630    
                           A  1631    .ENDFUNC "vdp_plotSetOrigin",140,"_vdp_plotSetO
                           A  1632    ;  141	
                           A  1633    ;  142	// Bitmap VDP functions
                           A  1634    ;  143	void vdp_bitmapSelect(UINT8 id)
                           A  1635    ;  144	{
040796                     A  1636    _vdp_bitmapSelect:
                           A  1637    .DEFINE "_vdp_bitmapSelect"
                           A  1638    
                           A  1639    .VALUE _vdp_bitmapSelect
                           A  1640    
                           A  1641    .CLASS 2
                           A  1642    
                           A  1643    .TYPE 65
                           A  1644    
                           A  1645    .ENDEF
                           A  1646    
                           A  1647    .BEGFUNC "vdp_bitmapSelect",144,"_vdp_bitmapSel
                           A  1648    
                           A  1649    .LINE 144
                           A  1650    
                           A  1651    .DEFINE "id"
                           A  1652    
                           A  1653    .CLASS 65
                           A  1654    
                           A  1655    .VALUE 6
                           A  1656    
                           A  1657    .TYPE 12
                           A  1658    
                           A  1659    .ENDEF
                           A  1660    
040796 DDE5                A  1661    	PUSH	IX
040798 DD210000 00         A  1662    	LD	IX,0
04079D DD39                A  1663    	ADD	IX,SP
                           A  1664    ;  145		putch(23); // vdu_sys
                           A  1665    .LINE 145
                           A  1666    
04079F 01170000            A  1667    	LD	BC,23
0407A3 C5                  A  1668    	PUSH	BC
0407A4 CD C5 0E 04         A  1669    	CALL	_putch
0407A8 C1                  A  1670    	POP	BC
                           A  1671    ;  146		putch(27); // sprite command
                           A  1672    .LINE 146
                           A  1673    
0407A9 011B0000            A  1674    	LD	BC,27
0407AD C5                  A  1675    	PUSH	BC
0407AE CD C5 0E 04         A  1676    	CALL	_putch
0407B2 C1                  A  1677    	POP	BC
                           A  1678    ;  147		putch(0);  // select command
                           A  1679    .LINE 147
                           A  1680    
0407B3 01000000            A  1681    	LD	BC,0
0407B7 C5                  A  1682    	PUSH	BC
0407B8 CD C5 0E 04         A  1683    	CALL	_putch
0407BC C1                  A  1684    	POP	BC
                           A  1685    ;  148		putch(id); // bitmap_id
                           A  1686    .LINE 148
                           A  1687    
0407BD DD7E06              A  1688    	LD	A,(IX+%6)
0407C0 B7ED62              A  1689    	UEXT	HL
0407C3 6F                  A  1690    	LD	L,A
0407C4 E5                  A  1691    	PUSH	HL
0407C5 CD C5 0E 04         A  1692    	CALL	_putch
0407C9 C1                  A  1693    	POP	BC
                           A  1694    ;  149		return;	
                           A  1695    ;  150	}
                           A  1696    .LINE 150
                           A  1697    
0407CA DDF9                A  1698    	LD	SP,IX
0407CC DDE1                A  1699    	POP	IX
0407CE C9                  A  1700    	RET	
                           A  1701    
                           A  1702    
                           A  1703    ;**************************** _vdp_bitmapSelect
                           A  1704    ;Name                         Addr/Register   S
                           A  1705    ;_putch                              IMPORT  --
                           A  1706    ;id                                    IX+6    
                           A  1707    
                           A  1708    
                           A  1709    ; Stack Frame Size: 9 (bytes)
                           A  1710    ;       Spill Code: 0 (instruction)
                           A  1711    
                           A  1712    
                           A  1713    .ENDFUNC "vdp_bitmapSelect",150,"_vdp_bitmapSel
                           A  1714    ;  151	
                           A  1715    ;  152	void vdp_bitmapSendDataSelected(UINT16 
                           A  1716    ;  153	{
0407CF                     A  1717    _vdp_bitmapSendDataSelected:
                           A  1718    .DEFINE "_vdp_bitmapSendDataSelected"
                           A  1719    
                           A  1720    .VALUE _vdp_bitmapSendDataSelected
                           A  1721    
                           A  1722    .CLASS 2
                           A  1723    
                           A  1724    .TYPE 65
                           A  1725    
                           A  1726    .ENDEF
                           A  1727    
                           A  1728    .BEGFUNC "vdp_bitmapSendDataSelected",153,"_vdp
                           A  1729    
                           A  1730    .LINE 153
                           A  1731    
                           A  1732    .DEFINE "width"
                           A  1733    
                           A  1734    .CLASS 65
                           A  1735    
                           A  1736    .VALUE 6
                           A  1737    
                           A  1738    .TYPE 13
                           A  1739    
                           A  1740    .ENDEF
                           A  1741    
                           A  1742    .DEFINE "height"
                           A  1743    
                           A  1744    .CLASS 65
                           A  1745    
                           A  1746    .VALUE 9
                           A  1747    
                           A  1748    .TYPE 13
                           A  1749    
                           A  1750    .ENDEF
                           A  1751    
                           A  1752    .DEFINE "data"
                           A  1753    
                           A  1754    .CLASS 65
                           A  1755    
                           A  1756    .VALUE 12
                           A  1757    
                           A  1758    .TYPE 47
                           A  1759    
                           A  1760    .ENDEF
                           A  1761    
                           A  1762    .DEFINE "n"
                           A  1763    
                           A  1764    .CLASS 65
                           A  1765    
                           A  1766    .VALUE -2
                           A  1767    
                           A  1768    .TYPE 13
                           A  1769    
                           A  1770    .ENDEF
                           A  1771    
0407CF DDE5                A  1772    	PUSH	IX
0407D1 DD210000 00         A  1773    	LD	IX,0
0407D6 DD39                A  1774    	ADD	IX,SP
0407D8 3B                  A  1775    	DEC	SP
0407D9 3B                  A  1776    	DEC	SP
                           A  1777    ;  154		UINT16 n;
                           A  1778    ;  155		
                           A  1779    ;  156		putch(23); // vdu_sys
                           A  1780    .LINE 156
                           A  1781    
0407DA 01170000            A  1782    	LD	BC,23
0407DE C5                  A  1783    	PUSH	BC
0407DF CD C5 0E 04         A  1784    	CALL	_putch
0407E3 C1                  A  1785    	POP	BC
                           A  1786    ;  157		putch(27); // sprite command
                           A  1787    .LINE 157
                           A  1788    
0407E4 011B0000            A  1789    	LD	BC,27
0407E8 C5                  A  1790    	PUSH	BC
0407E9 CD C5 0E 04         A  1791    	CALL	_putch
0407ED C1                  A  1792    	POP	BC
                           A  1793    ;  158		putch(1);  // send data to selected
                           A  1794    .LINE 158
                           A  1795    
0407EE 01010000            A  1796    	LD	BC,1
0407F2 C5                  A  1797    	PUSH	BC
0407F3 CD C5 0E 04         A  1798    	CALL	_putch
0407F7 C1                  A  1799    	POP	BC
                           A  1800    ;  159		
                           A  1801    ;  160		write16bit(width);
                           A  1802    .LINE 160
                           A  1803    
0407F8 DD0706              A  1804    	LD	BC,(IX+%6)
0407FB C5                  A  1805    	PUSH	BC
0407FC CD B9 03 04         A  1806    	CALL	_write16bit
040800 C1                  A  1807    	POP	BC
                           A  1808    ;  161		write16bit(height);
                           A  1809    .LINE 161
                           A  1810    
040801 DD0709              A  1811    	LD	BC,(IX+%9)
040804 C5                  A  1812    	PUSH	BC
040805 CD B9 03 04         A  1813    	CALL	_write16bit
040809 C1                  A  1814    	POP	BC
                           A  1815    ;  162		
                           A  1816    ;  163		for(n = 0; n < (width*height); n++)
                           A  1817    .LINE 163
                           A  1818    
04080A DD36FE00            A  1819    	LD	(IX+%FFFFFFFE),%0
04080E DD36FF00            A  1820    	LD	(IX+%FFFFFFFF),%0
040812 18 2B               A  1821    	JR	L_28
040814                     A  1822    L_26:
                           A  1823    ;  164		{
                           A  1824    ;  165			write32bit(data[n]);
                           A  1825    .LINE 165
                           A  1826    
040814 DD07FE              A  1827    	LD	BC,(IX+%FFFFFFFE)
040817 CD 3C 11 04         A  1828    	CALL	__stoiu
04081B 29                  A  1829    	ADD	HL,HL
04081C 29                  A  1830    	ADD	HL,HL
04081D DD070C              A  1831    	LD	BC,(IX+%C)
040820 09                  A  1832    	ADD	HL,BC
040821 E5FDE1              A  1833    	LD	IY,HL
040824 FD0700              A  1834    	LD	BC,(IY)
040827 FD7E03              A  1835    	LD	A,(IY+%3)
04082A 2600                A  1836    	LD	H,%0
04082C 6F                  A  1837    	LD	L,A
04082D E5                  A  1838    	PUSH	HL
04082E C5                  A  1839    	PUSH	BC
04082F CD EC 03 04         A  1840    	CALL	_write32bit
040833 C1                  A  1841    	POP	BC
040834 C1                  A  1842    	POP	BC
040835 DD27FE              A  1843    	LD	HL,(IX+%FFFFFFFE)
040838 23                  A  1844    	INC	HL
040839 DD75FE              A  1845    	LD	(IX+%FFFFFFFE),L
04083C DD74FF              A  1846    	LD	(IX+%FFFFFFFF),H
                           A  1847    ;  166			//delayms(1);
                           A  1848    ;  167		}
04083F                     A  1849    L_28:
                           A  1850    .LINE 167
                           A  1851    
04083F DD0706              A  1852    	LD	BC,(IX+%6)
040842 CD 3C 11 04         A  1853    	CALL	__stoiu
040846 E5D1                A  1854    	LD	DE,HL
040848 DD0709              A  1855    	LD	BC,(IX+%9)
04084B CD 3C 11 04         A  1856    	CALL	__stoiu
04084F E5C1                A  1857    	LD	BC,HL
040851 D5E1                A  1858    	LD	HL,DE
040853 CD 3E 17 04         A  1859    	CALL	__imuls
040857 E5D1                A  1860    	LD	DE,HL
040859 DD07FE              A  1861    	LD	BC,(IX+%FFFFFFFE)
04085C CD 3C 11 04         A  1862    	CALL	__stoiu
040860 B7                  A  1863    	OR	A,A
040861 ED52                A  1864    	SBC	HL,DE
040863 FA 14 08 04         A  1865    	JP	M,L_26
                           A  1866    ;  168		return;		
                           A  1867    ;  169	}
                           A  1868    .LINE 169
                           A  1869    
040867 DDF9                A  1870    	LD	SP,IX
040869 DDE1                A  1871    	POP	IX
04086B C9                  A  1872    	RET	
                           A  1873    
                           A  1874    
                           A  1875    ;**************************** _vdp_bitmapSendDa
                           A  1876    ;Name                         Addr/Register   S
                           A  1877    ;_putch                              IMPORT  --
                           A  1878    ;n                                     IX-2    
                           A  1879    ;data                                 IX+12    
                           A  1880    ;height                                IX+9    
                           A  1881    ;width                                 IX+6    
                           A  1882    
                           A  1883    
                           A  1884    ; Stack Frame Size: 17 (bytes)
                           A  1885    ;       Spill Code: 0 (instruction)
                           A  1886    
                           A  1887    
                           A  1888    .ENDFUNC "vdp_bitmapSendDataSelected",169,"_vdp
                           A  1889    ;  170	
                           A  1890    ;  171	void vdp_bitmapSendData(UINT8 id, UINT1
                           A  1891    ;  172	{
04086C                     A  1892    _vdp_bitmapSendData:
                           A  1893    .DEFINE "_vdp_bitmapSendData"
                           A  1894    
                           A  1895    .VALUE _vdp_bitmapSendData
                           A  1896    
                           A  1897    .CLASS 2
                           A  1898    
                           A  1899    .TYPE 65
                           A  1900    
                           A  1901    .ENDEF
                           A  1902    
                           A  1903    .BEGFUNC "vdp_bitmapSendData",172,"_vdp_bitmapS
                           A  1904    
                           A  1905    .LINE 172
                           A  1906    
                           A  1907    .DEFINE "id"
                           A  1908    
                           A  1909    .CLASS 65
                           A  1910    
                           A  1911    .VALUE 6
                           A  1912    
                           A  1913    .TYPE 12
                           A  1914    
                           A  1915    .ENDEF
                           A  1916    
                           A  1917    .DEFINE "width"
                           A  1918    
                           A  1919    .CLASS 65
                           A  1920    
                           A  1921    .VALUE 9
                           A  1922    
                           A  1923    .TYPE 13
                           A  1924    
                           A  1925    .ENDEF
                           A  1926    
                           A  1927    .DEFINE "height"
                           A  1928    
                           A  1929    .CLASS 65
                           A  1930    
                           A  1931    .VALUE 12
                           A  1932    
                           A  1933    .TYPE 13
                           A  1934    
                           A  1935    .ENDEF
                           A  1936    
                           A  1937    .DEFINE "data"
                           A  1938    
                           A  1939    .CLASS 65
                           A  1940    
                           A  1941    .VALUE 15
                           A  1942    
                           A  1943    .TYPE 47
                           A  1944    
                           A  1945    .ENDEF
                           A  1946    
04086C DDE5                A  1947    	PUSH	IX
04086E DD210000 00         A  1948    	LD	IX,0
040873 DD39                A  1949    	ADD	IX,SP
                           A  1950    ;  173		vdp_bitmapSelect(id);
                           A  1951    .LINE 173
                           A  1952    
040875 DD4E06              A  1953    	LD	C,(IX+%6)
040878 0600                A  1954    	LD	B,%0
04087A C5                  A  1955    	PUSH	BC
04087B CD 96 07 04         A  1956    	CALL	_vdp_bitmapSelect
04087F C1                  A  1957    	POP	BC
                           A  1958    ;  174		vdp_bitmapSendDataSelected(width, h
                           A  1959    .LINE 174
                           A  1960    
040880 DD070F              A  1961    	LD	BC,(IX+%F)
040883 C5                  A  1962    	PUSH	BC
040884 DD070C              A  1963    	LD	BC,(IX+%C)
040887 C5                  A  1964    	PUSH	BC
040888 DD0709              A  1965    	LD	BC,(IX+%9)
04088B C5                  A  1966    	PUSH	BC
04088C CD CF 07 04         A  1967    	CALL	_vdp_bitmapSendDataSelected
040890 C1                  A  1968    	POP	BC
040891 C1                  A  1969    	POP	BC
040892 C1                  A  1970    	POP	BC
                           A  1971    ;  175		return;	
                           A  1972    ;  176	}
                           A  1973    .LINE 176
                           A  1974    
040893 DDF9                A  1975    	LD	SP,IX
040895 DDE1                A  1976    	POP	IX
040897 C9                  A  1977    	RET	
                           A  1978    
                           A  1979    
                           A  1980    ;**************************** _vdp_bitmapSendDa
                           A  1981    ;Name                         Addr/Register   S
                           A  1982    ;data                                 IX+15    
                           A  1983    ;height                               IX+12    
                           A  1984    ;width                                 IX+9    
                           A  1985    ;id                                    IX+6    
                           A  1986    
                           A  1987    
                           A  1988    ; Stack Frame Size: 18 (bytes)
                           A  1989    ;       Spill Code: 0 (instruction)
                           A  1990    
                           A  1991    
                           A  1992    .ENDFUNC "vdp_bitmapSendData",176,"_vdp_bitmapS
                           A  1993    ;  177	
                           A  1994    ;  178	void vdp_bitmapDrawSelected(UINT16 x, U
                           A  1995    ;  179	{
040898                     A  1996    _vdp_bitmapDrawSelected:
                           A  1997    .DEFINE "_vdp_bitmapDrawSelected"
                           A  1998    
                           A  1999    .VALUE _vdp_bitmapDrawSelected
                           A  2000    
                           A  2001    .CLASS 2
                           A  2002    
                           A  2003    .TYPE 65
                           A  2004    
                           A  2005    .ENDEF
                           A  2006    
                           A  2007    .BEGFUNC "vdp_bitmapDrawSelected",179,"_vdp_bit
                           A  2008    
                           A  2009    .LINE 179
                           A  2010    
                           A  2011    .DEFINE "x"
                           A  2012    
                           A  2013    .CLASS 65
                           A  2014    
                           A  2015    .VALUE 6
                           A  2016    
                           A  2017    .TYPE 13
                           A  2018    
                           A  2019    .ENDEF
                           A  2020    
                           A  2021    .DEFINE "y"
                           A  2022    
                           A  2023    .CLASS 65
                           A  2024    
                           A  2025    .VALUE 9
                           A  2026    
                           A  2027    .TYPE 13
                           A  2028    
                           A  2029    .ENDEF
                           A  2030    
040898 DDE5                A  2031    	PUSH	IX
04089A DD210000 00         A  2032    	LD	IX,0
04089F DD39                A  2033    	ADD	IX,SP
                           A  2034    ;  180		putch(23); // vdu_sys
                           A  2035    .LINE 180
                           A  2036    
0408A1 01170000            A  2037    	LD	BC,23
0408A5 C5                  A  2038    	PUSH	BC
0408A6 CD C5 0E 04         A  2039    	CALL	_putch
0408AA C1                  A  2040    	POP	BC
                           A  2041    ;  181		putch(27); // sprite command
                           A  2042    .LINE 181
                           A  2043    
0408AB 011B0000            A  2044    	LD	BC,27
0408AF C5                  A  2045    	PUSH	BC
0408B0 CD C5 0E 04         A  2046    	CALL	_putch
0408B4 C1                  A  2047    	POP	BC
                           A  2048    ;  182		putch(3);  // draw selected bitmap
                           A  2049    .LINE 182
                           A  2050    
0408B5 01030000            A  2051    	LD	BC,3
0408B9 C5                  A  2052    	PUSH	BC
0408BA CD C5 0E 04         A  2053    	CALL	_putch
0408BE C1                  A  2054    	POP	BC
                           A  2055    ;  183		
                           A  2056    ;  184		write16bit(x);
                           A  2057    .LINE 184
                           A  2058    
0408BF DD0706              A  2059    	LD	BC,(IX+%6)
0408C2 C5                  A  2060    	PUSH	BC
0408C3 CD B9 03 04         A  2061    	CALL	_write16bit
0408C7 C1                  A  2062    	POP	BC
                           A  2063    ;  185		write16bit(y);
                           A  2064    .LINE 185
                           A  2065    
0408C8 DD0709              A  2066    	LD	BC,(IX+%9)
0408CB C5                  A  2067    	PUSH	BC
0408CC CD B9 03 04         A  2068    	CALL	_write16bit
0408D0 C1                  A  2069    	POP	BC
                           A  2070    ;  186		
                           A  2071    ;  187		return;
                           A  2072    ;  188	}
                           A  2073    .LINE 188
                           A  2074    
0408D1 DDF9                A  2075    	LD	SP,IX
0408D3 DDE1                A  2076    	POP	IX
0408D5 C9                  A  2077    	RET	
                           A  2078    
                           A  2079    
                           A  2080    ;**************************** _vdp_bitmapDrawSe
                           A  2081    ;Name                         Addr/Register   S
                           A  2082    ;_putch                              IMPORT  --
                           A  2083    ;y                                     IX+9    
                           A  2084    ;x                                     IX+6    
                           A  2085    
                           A  2086    
                           A  2087    ; Stack Frame Size: 12 (bytes)
                           A  2088    ;       Spill Code: 0 (instruction)
                           A  2089    
                           A  2090    
                           A  2091    .ENDFUNC "vdp_bitmapDrawSelected",188,"_vdp_bit
                           A  2092    ;  189	
                           A  2093    ;  190	void vdp_bitmapDraw(UINT8 id, UINT16 x,
                           A  2094    ;  191	{
0408D6                     A  2095    _vdp_bitmapDraw:
                           A  2096    .DEFINE "_vdp_bitmapDraw"
                           A  2097    
                           A  2098    .VALUE _vdp_bitmapDraw
                           A  2099    
                           A  2100    .CLASS 2
                           A  2101    
                           A  2102    .TYPE 65
                           A  2103    
                           A  2104    .ENDEF
                           A  2105    
                           A  2106    .BEGFUNC "vdp_bitmapDraw",191,"_vdp_bitmapDraw"
                           A  2107    
                           A  2108    .LINE 191
                           A  2109    
                           A  2110    .DEFINE "id"
                           A  2111    
                           A  2112    .CLASS 65
                           A  2113    
                           A  2114    .VALUE 6
                           A  2115    
                           A  2116    .TYPE 12
                           A  2117    
                           A  2118    .ENDEF
                           A  2119    
                           A  2120    .DEFINE "x"
                           A  2121    
                           A  2122    .CLASS 65
                           A  2123    
                           A  2124    .VALUE 9
                           A  2125    
                           A  2126    .TYPE 13
                           A  2127    
                           A  2128    .ENDEF
                           A  2129    
                           A  2130    .DEFINE "y"
                           A  2131    
                           A  2132    .CLASS 65
                           A  2133    
                           A  2134    .VALUE 12
                           A  2135    
                           A  2136    .TYPE 13
                           A  2137    
                           A  2138    .ENDEF
                           A  2139    
0408D6 DDE5                A  2140    	PUSH	IX
0408D8 DD210000 00         A  2141    	LD	IX,0
0408DD DD39                A  2142    	ADD	IX,SP
                           A  2143    ;  192		vdp_bitmapSelect(id);
                           A  2144    .LINE 192
                           A  2145    
0408DF DD4E06              A  2146    	LD	C,(IX+%6)
0408E2 0600                A  2147    	LD	B,%0
0408E4 C5                  A  2148    	PUSH	BC
0408E5 CD 96 07 04         A  2149    	CALL	_vdp_bitmapSelect
0408E9 C1                  A  2150    	POP	BC
                           A  2151    ;  193		vdp_bitmapDrawSelected(x,y);
                           A  2152    .LINE 193
                           A  2153    
0408EA DD070C              A  2154    	LD	BC,(IX+%C)
0408ED C5                  A  2155    	PUSH	BC
0408EE DD0709              A  2156    	LD	BC,(IX+%9)
0408F1 C5                  A  2157    	PUSH	BC
0408F2 CD 98 08 04         A  2158    	CALL	_vdp_bitmapDrawSelected
0408F6 C1                  A  2159    	POP	BC
0408F7 C1                  A  2160    	POP	BC
                           A  2161    ;  194		return;	
                           A  2162    ;  195	}
                           A  2163    .LINE 195
                           A  2164    
0408F8 DDF9                A  2165    	LD	SP,IX
0408FA DDE1                A  2166    	POP	IX
0408FC C9                  A  2167    	RET	
                           A  2168    
                           A  2169    
                           A  2170    ;**************************** _vdp_bitmapDraw *
                           A  2171    ;Name                         Addr/Register   S
                           A  2172    ;y                                    IX+12    
                           A  2173    ;x                                     IX+9    
                           A  2174    ;id                                    IX+6    
                           A  2175    
                           A  2176    
                           A  2177    ; Stack Frame Size: 15 (bytes)
                           A  2178    ;       Spill Code: 0 (instruction)
                           A  2179    
                           A  2180    
                           A  2181    .ENDFUNC "vdp_bitmapDraw",195,"_vdp_bitmapDraw"
                           A  2182    ;  196	
                           A  2183    ;  197	void vdp_bitmapCreateSolidColorSelected
                           A  2184    ;  198	{
0408FD                     A  2185    _vdp_bitmapCreateSolidColorSelected:
                           A  2186    .DEFINE "_vdp_bitmapCreateSolidColorSelected"
                           A  2187    
                           A  2188    .VALUE _vdp_bitmapCreateSolidColorSelected
                           A  2189    
                           A  2190    .CLASS 2
                           A  2191    
                           A  2192    .TYPE 65
                           A  2193    
                           A  2194    .ENDEF
                           A  2195    
                           A  2196    .BEGFUNC "vdp_bitmapCreateSolidColorSelected",1
                           A  2197    
                           A  2198    .LINE 198
                           A  2199    
                           A  2200    .DEFINE "width"
                           A  2201    
                           A  2202    .CLASS 65
                           A  2203    
                           A  2204    .VALUE 6
                           A  2205    
                           A  2206    .TYPE 13
                           A  2207    
                           A  2208    .ENDEF
                           A  2209    
                           A  2210    .DEFINE "height"
                           A  2211    
                           A  2212    .CLASS 65
                           A  2213    
                           A  2214    .VALUE 9
                           A  2215    
                           A  2216    .TYPE 13
                           A  2217    
                           A  2218    .ENDEF
                           A  2219    
                           A  2220    .DEFINE "abgr"
                           A  2221    
                           A  2222    .CLASS 65
                           A  2223    
                           A  2224    .VALUE 12
                           A  2225    
                           A  2226    .TYPE 15
                           A  2227    
                           A  2228    .ENDEF
                           A  2229    
0408FD DDE5                A  2230    	PUSH	IX
0408FF DD210000 00         A  2231    	LD	IX,0
040904 DD39                A  2232    	ADD	IX,SP
                           A  2233    ;  199		putch(23); // vdu_sys
                           A  2234    .LINE 199
                           A  2235    
040906 01170000            A  2236    	LD	BC,23
04090A C5                  A  2237    	PUSH	BC
04090B CD C5 0E 04         A  2238    	CALL	_putch
04090F C1                  A  2239    	POP	BC
                           A  2240    ;  200		putch(27); // sprite command
                           A  2241    .LINE 200
                           A  2242    
040910 011B0000            A  2243    	LD	BC,27
040914 C5                  A  2244    	PUSH	BC
040915 CD C5 0E 04         A  2245    	CALL	_putch
040919 C1                  A  2246    	POP	BC
                           A  2247    ;  201		putch(2);  // define in single colo
                           A  2248    .LINE 201
                           A  2249    
04091A 01020000            A  2250    	LD	BC,2
04091E C5                  A  2251    	PUSH	BC
04091F CD C5 0E 04         A  2252    	CALL	_putch
040923 C1                  A  2253    	POP	BC
                           A  2254    ;  202		
                           A  2255    ;  203		write16bit(width);
                           A  2256    .LINE 203
                           A  2257    
040924 DD0706              A  2258    	LD	BC,(IX+%6)
040927 C5                  A  2259    	PUSH	BC
040928 CD B9 03 04         A  2260    	CALL	_write16bit
04092C C1                  A  2261    	POP	BC
                           A  2262    ;  204		write16bit(height);
                           A  2263    .LINE 204
                           A  2264    
04092D DD0709              A  2265    	LD	BC,(IX+%9)
040930 C5                  A  2266    	PUSH	BC
040931 CD B9 03 04         A  2267    	CALL	_write16bit
040935 C1                  A  2268    	POP	BC
                           A  2269    ;  205		write32bit(abgr);
                           A  2270    .LINE 205
                           A  2271    
040936 DD4E0F              A  2272    	LD	C,(IX+%F)
040939 0600                A  2273    	LD	B,%0
04093B C5                  A  2274    	PUSH	BC
04093C DD070C              A  2275    	LD	BC,(IX+%C)
04093F C5                  A  2276    	PUSH	BC
040940 CD EC 03 04         A  2277    	CALL	_write32bit
040944 C1                  A  2278    	POP	BC
040945 C1                  A  2279    	POP	BC
                           A  2280    ;  206		return;		
                           A  2281    ;  207	}
                           A  2282    .LINE 207
                           A  2283    
040946 DDF9                A  2284    	LD	SP,IX
040948 DDE1                A  2285    	POP	IX
04094A C9                  A  2286    	RET	
                           A  2287    
                           A  2288    
                           A  2289    ;**************************** _vdp_bitmapCreate
                           A  2290    ;Name                         Addr/Register   S
                           A  2291    ;_putch                              IMPORT  --
                           A  2292    ;abgr                                 IX+12    
                           A  2293    ;height                                IX+9    
                           A  2294    ;width                                 IX+6    
                           A  2295    
                           A  2296    
                           A  2297    ; Stack Frame Size: 18 (bytes)
                           A  2298    ;       Spill Code: 0 (instruction)
                           A  2299    
                           A  2300    
                           A  2301    .ENDFUNC "vdp_bitmapCreateSolidColorSelected",2
                           A  2302    ;  208	
                           A  2303    ;  209	void vdp_bitmapCreateSolidColor(UINT8 i
                           A  2304    ;  210	{
04094B                     A  2305    _vdp_bitmapCreateSolidColor:
                           A  2306    .DEFINE "_vdp_bitmapCreateSolidColor"
                           A  2307    
                           A  2308    .VALUE _vdp_bitmapCreateSolidColor
                           A  2309    
                           A  2310    .CLASS 2
                           A  2311    
                           A  2312    .TYPE 65
                           A  2313    
                           A  2314    .ENDEF
                           A  2315    
                           A  2316    .BEGFUNC "vdp_bitmapCreateSolidColor",210,"_vdp
                           A  2317    
                           A  2318    .LINE 210
                           A  2319    
                           A  2320    .DEFINE "id"
                           A  2321    
                           A  2322    .CLASS 65
                           A  2323    
                           A  2324    .VALUE 6
                           A  2325    
                           A  2326    .TYPE 12
                           A  2327    
                           A  2328    .ENDEF
                           A  2329    
                           A  2330    .DEFINE "width"
                           A  2331    
                           A  2332    .CLASS 65
                           A  2333    
                           A  2334    .VALUE 9
                           A  2335    
                           A  2336    .TYPE 13
                           A  2337    
                           A  2338    .ENDEF
                           A  2339    
                           A  2340    .DEFINE "height"
                           A  2341    
                           A  2342    .CLASS 65
                           A  2343    
                           A  2344    .VALUE 12
                           A  2345    
                           A  2346    .TYPE 13
                           A  2347    
                           A  2348    .ENDEF
                           A  2349    
                           A  2350    .DEFINE "abgr"
                           A  2351    
                           A  2352    .CLASS 65
                           A  2353    
                           A  2354    .VALUE 15
                           A  2355    
                           A  2356    .TYPE 15
                           A  2357    
                           A  2358    .ENDEF
                           A  2359    
04094B DDE5                A  2360    	PUSH	IX
04094D DD210000 00         A  2361    	LD	IX,0
040952 DD39                A  2362    	ADD	IX,SP
                           A  2363    ;  211		vdp_bitmapSelect(id);
                           A  2364    .LINE 211
                           A  2365    
040954 DD4E06              A  2366    	LD	C,(IX+%6)
040957 0600                A  2367    	LD	B,%0
040959 C5                  A  2368    	PUSH	BC
04095A CD 96 07 04         A  2369    	CALL	_vdp_bitmapSelect
04095E C1                  A  2370    	POP	BC
                           A  2371    ;  212		vdp_bitmapCreateSolidColorSelected(
                           A  2372    .LINE 212
                           A  2373    
04095F DD4E12              A  2374    	LD	C,(IX+%12)
040962 0600                A  2375    	LD	B,%0
040964 C5                  A  2376    	PUSH	BC
040965 DD070F              A  2377    	LD	BC,(IX+%F)
040968 C5                  A  2378    	PUSH	BC
040969 DD070C              A  2379    	LD	BC,(IX+%C)
04096C C5                  A  2380    	PUSH	BC
04096D DD0709              A  2381    	LD	BC,(IX+%9)
040970 C5                  A  2382    	PUSH	BC
040971 CD FD 08 04         A  2383    	CALL	_vdp_bitmapCreateSolidColorSelected
040975 C1                  A  2384    	POP	BC
040976 C1                  A  2385    	POP	BC
040977 C1                  A  2386    	POP	BC
040978 C1                  A  2387    	POP	BC
                           A  2388    ;  213		return;	
                           A  2389    ;  214	}
                           A  2390    .LINE 214
                           A  2391    
040979 DDF9                A  2392    	LD	SP,IX
04097B DDE1                A  2393    	POP	IX
04097D C9                  A  2394    	RET	
                           A  2395    
                           A  2396    
                           A  2397    ;**************************** _vdp_bitmapCreate
                           A  2398    ;Name                         Addr/Register   S
                           A  2399    ;abgr                                 IX+15    
                           A  2400    ;height                               IX+12    
                           A  2401    ;width                                 IX+9    
                           A  2402    ;id                                    IX+6    
                           A  2403    
                           A  2404    
                           A  2405    ; Stack Frame Size: 21 (bytes)
                           A  2406    ;       Spill Code: 0 (instruction)
                           A  2407    
                           A  2408    
                           A  2409    .ENDFUNC "vdp_bitmapCreateSolidColor",214,"_vdp
                           A  2410    ;  215	
                           A  2411    ;  216	// Sprite VDP functions
                           A  2412    ;  217	void vdp_spriteSelect(UINT8 id)
                           A  2413    ;  218	{
04097E                     A  2414    _vdp_spriteSelect:
                           A  2415    .DEFINE "_vdp_spriteSelect"
                           A  2416    
                           A  2417    .VALUE _vdp_spriteSelect
                           A  2418    
                           A  2419    .CLASS 2
                           A  2420    
                           A  2421    .TYPE 65
                           A  2422    
                           A  2423    .ENDEF
                           A  2424    
                           A  2425    .BEGFUNC "vdp_spriteSelect",218,"_vdp_spriteSel
                           A  2426    
                           A  2427    .LINE 218
                           A  2428    
                           A  2429    .DEFINE "id"
                           A  2430    
                           A  2431    .CLASS 65
                           A  2432    
                           A  2433    .VALUE 6
                           A  2434    
                           A  2435    .TYPE 12
                           A  2436    
                           A  2437    .ENDEF
                           A  2438    
04097E DDE5                A  2439    	PUSH	IX
040980 DD210000 00         A  2440    	LD	IX,0
040985 DD39                A  2441    	ADD	IX,SP
                           A  2442    ;  219		putch(23); // vdu_sys
                           A  2443    .LINE 219
                           A  2444    
040987 01170000            A  2445    	LD	BC,23
04098B C5                  A  2446    	PUSH	BC
04098C CD C5 0E 04         A  2447    	CALL	_putch
040990 C1                  A  2448    	POP	BC
                           A  2449    ;  220		putch(27); // sprite command
                           A  2450    .LINE 220
                           A  2451    
040991 011B0000            A  2452    	LD	BC,27
040995 C5                  A  2453    	PUSH	BC
040996 CD C5 0E 04         A  2454    	CALL	_putch
04099A C1                  A  2455    	POP	BC
                           A  2456    ;  221		putch(4);  // select sprite
                           A  2457    .LINE 221
                           A  2458    
04099B 01040000            A  2459    	LD	BC,4
04099F C5                  A  2460    	PUSH	BC
0409A0 CD C5 0E 04         A  2461    	CALL	_putch
0409A4 C1                  A  2462    	POP	BC
                           A  2463    ;  222		putch(id);
                           A  2464    .LINE 222
                           A  2465    
0409A5 DD7E06              A  2466    	LD	A,(IX+%6)
0409A8 B7ED62              A  2467    	UEXT	HL
0409AB 6F                  A  2468    	LD	L,A
0409AC E5                  A  2469    	PUSH	HL
0409AD CD C5 0E 04         A  2470    	CALL	_putch
0409B1 C1                  A  2471    	POP	BC
                           A  2472    ;  223		return;			
                           A  2473    ;  224	}
                           A  2474    .LINE 224
                           A  2475    
0409B2 DDF9                A  2476    	LD	SP,IX
0409B4 DDE1                A  2477    	POP	IX
0409B6 C9                  A  2478    	RET	
                           A  2479    
                           A  2480    
                           A  2481    ;**************************** _vdp_spriteSelect
                           A  2482    ;Name                         Addr/Register   S
                           A  2483    ;_putch                              IMPORT  --
                           A  2484    ;id                                    IX+6    
                           A  2485    
                           A  2486    
                           A  2487    ; Stack Frame Size: 9 (bytes)
                           A  2488    ;       Spill Code: 0 (instruction)
                           A  2489    
                           A  2490    
                           A  2491    .ENDFUNC "vdp_spriteSelect",224,"_vdp_spriteSel
                           A  2492    ;  225	
                           A  2493    ;  226	void vdp_spriteClearFramesSelected(void
                           A  2494    ;  227	{
0409B7                     A  2495    _vdp_spriteClearFramesSelected:
                           A  2496    .DEFINE "_vdp_spriteClearFramesSelected"
                           A  2497    
                           A  2498    .VALUE _vdp_spriteClearFramesSelected
                           A  2499    
                           A  2500    .CLASS 2
                           A  2501    
                           A  2502    .TYPE 65
                           A  2503    
                           A  2504    .ENDEF
                           A  2505    
                           A  2506    .BEGFUNC "vdp_spriteClearFramesSelected",227,"_
                           A  2507    
0409B7 DDE5                A  2508    	PUSH	IX
0409B9 DD210000 00         A  2509    	LD	IX,0
0409BE DD39                A  2510    	ADD	IX,SP
                           A  2511    ;  228		putch(23); // vdu_sys
                           A  2512    .LINE 228
                           A  2513    
0409C0 01170000            A  2514    	LD	BC,23
0409C4 C5                  A  2515    	PUSH	BC
0409C5 CD C5 0E 04         A  2516    	CALL	_putch
0409C9 C1                  A  2517    	POP	BC
                           A  2518    ;  229		putch(27); // sprite command
                           A  2519    .LINE 229
                           A  2520    
0409CA 011B0000            A  2521    	LD	BC,27
0409CE C5                  A  2522    	PUSH	BC
0409CF CD C5 0E 04         A  2523    	CALL	_putch
0409D3 C1                  A  2524    	POP	BC
                           A  2525    ;  230		putch(5);  // clear frames
                           A  2526    .LINE 230
                           A  2527    
0409D4 01050000            A  2528    	LD	BC,5
0409D8 C5                  A  2529    	PUSH	BC
0409D9 CD C5 0E 04         A  2530    	CALL	_putch
0409DD C1                  A  2531    	POP	BC
                           A  2532    ;  231		return;				
                           A  2533    ;  232	}
                           A  2534    .LINE 232
                           A  2535    
0409DE DDF9                A  2536    	LD	SP,IX
0409E0 DDE1                A  2537    	POP	IX
0409E2 C9                  A  2538    	RET	
                           A  2539    
                           A  2540    
                           A  2541    ;**************************** _vdp_spriteClearF
                           A  2542    ;Name                         Addr/Register   S
                           A  2543    ;_putch                              IMPORT  --
                           A  2544    
                           A  2545    
                           A  2546    ; Stack Frame Size: 6 (bytes)
                           A  2547    ;       Spill Code: 0 (instruction)
                           A  2548    
                           A  2549    
                           A  2550    .ENDFUNC "vdp_spriteClearFramesSelected",232,"_
                           A  2551    ;  233	
                           A  2552    ;  234	void vdp_spriteClearFrames(UINT8 bitmap
                           A  2553    ;  235	{
0409E3                     A  2554    _vdp_spriteClearFrames:
                           A  2555    .DEFINE "_vdp_spriteClearFrames"
                           A  2556    
                           A  2557    .VALUE _vdp_spriteClearFrames
                           A  2558    
                           A  2559    .CLASS 2
                           A  2560    
                           A  2561    .TYPE 65
                           A  2562    
                           A  2563    .ENDEF
                           A  2564    
                           A  2565    .BEGFUNC "vdp_spriteClearFrames",235,"_vdp_spri
                           A  2566    
                           A  2567    .LINE 235
                           A  2568    
                           A  2569    .DEFINE "bitmapid"
                           A  2570    
                           A  2571    .CLASS 65
                           A  2572    
                           A  2573    .VALUE 6
                           A  2574    
                           A  2575    .TYPE 12
                           A  2576    
                           A  2577    .ENDEF
                           A  2578    
0409E3 DDE5                A  2579    	PUSH	IX
0409E5 DD210000 00         A  2580    	LD	IX,0
0409EA DD39                A  2581    	ADD	IX,SP
                           A  2582    ;  236		vdp_spriteSelect(bitmapid);
                           A  2583    .LINE 236
                           A  2584    
0409EC DD4E06              A  2585    	LD	C,(IX+%6)
0409EF 0600                A  2586    	LD	B,%0
0409F1 C5                  A  2587    	PUSH	BC
0409F2 CD 7E 09 04         A  2588    	CALL	_vdp_spriteSelect
0409F6 C1                  A  2589    	POP	BC
                           A  2590    ;  237		vdp_spriteClearFramesSelected();
                           A  2591    .LINE 237
                           A  2592    
0409F7 CD B7 09 04         A  2593    	CALL	_vdp_spriteClearFramesSelected
                           A  2594    ;  238		return;				
                           A  2595    ;  239	}
                           A  2596    .LINE 239
                           A  2597    
0409FB DDF9                A  2598    	LD	SP,IX
0409FD DDE1                A  2599    	POP	IX
0409FF C9                  A  2600    	RET	
                           A  2601    
                           A  2602    
                           A  2603    ;**************************** _vdp_spriteClearF
                           A  2604    ;Name                         Addr/Register   S
                           A  2605    ;bitmapid                              IX+6    
                           A  2606    
                           A  2607    
                           A  2608    ; Stack Frame Size: 9 (bytes)
                           A  2609    ;       Spill Code: 0 (instruction)
                           A  2610    
                           A  2611    
                           A  2612    .ENDFUNC "vdp_spriteClearFrames",239,"_vdp_spri
                           A  2613    ;  240	
                           A  2614    ;  241	void vdp_spriteAddFrameSelected(UINT8 b
                           A  2615    ;  242	{
040A00                     A  2616    _vdp_spriteAddFrameSelected:
                           A  2617    .DEFINE "_vdp_spriteAddFrameSelected"
                           A  2618    
                           A  2619    .VALUE _vdp_spriteAddFrameSelected
                           A  2620    
                           A  2621    .CLASS 2
                           A  2622    
                           A  2623    .TYPE 65
                           A  2624    
                           A  2625    .ENDEF
                           A  2626    
                           A  2627    .BEGFUNC "vdp_spriteAddFrameSelected",242,"_vdp
                           A  2628    
                           A  2629    .LINE 242
                           A  2630    
                           A  2631    .DEFINE "bitmapid"
                           A  2632    
                           A  2633    .CLASS 65
                           A  2634    
                           A  2635    .VALUE 6
                           A  2636    
                           A  2637    .TYPE 12
                           A  2638    
                           A  2639    .ENDEF
                           A  2640    
040A00 DDE5                A  2641    	PUSH	IX
040A02 DD210000 00         A  2642    	LD	IX,0
040A07 DD39                A  2643    	ADD	IX,SP
                           A  2644    ;  243		putch(23); // vdu_sys
                           A  2645    .LINE 243
                           A  2646    
040A09 01170000            A  2647    	LD	BC,23
040A0D C5                  A  2648    	PUSH	BC
040A0E CD C5 0E 04         A  2649    	CALL	_putch
040A12 C1                  A  2650    	POP	BC
                           A  2651    ;  244		putch(27); // sprite command
                           A  2652    .LINE 244
                           A  2653    
040A13 011B0000            A  2654    	LD	BC,27
040A17 C5                  A  2655    	PUSH	BC
040A18 CD C5 0E 04         A  2656    	CALL	_putch
040A1C C1                  A  2657    	POP	BC
                           A  2658    ;  245		putch(6);  // add frame
                           A  2659    .LINE 245
                           A  2660    
040A1D 01060000            A  2661    	LD	BC,6
040A21 C5                  A  2662    	PUSH	BC
040A22 CD C5 0E 04         A  2663    	CALL	_putch
040A26 C1                  A  2664    	POP	BC
                           A  2665    ;  246		putch(bitmapid);
                           A  2666    .LINE 246
                           A  2667    
040A27 DD7E06              A  2668    	LD	A,(IX+%6)
040A2A B7ED62              A  2669    	UEXT	HL
040A2D 6F                  A  2670    	LD	L,A
040A2E E5                  A  2671    	PUSH	HL
040A2F CD C5 0E 04         A  2672    	CALL	_putch
040A33 C1                  A  2673    	POP	BC
                           A  2674    ;  247		return;	
                           A  2675    ;  248	}
                           A  2676    .LINE 248
                           A  2677    
040A34 DDF9                A  2678    	LD	SP,IX
040A36 DDE1                A  2679    	POP	IX
040A38 C9                  A  2680    	RET	
                           A  2681    
                           A  2682    
                           A  2683    ;**************************** _vdp_spriteAddFra
                           A  2684    ;Name                         Addr/Register   S
                           A  2685    ;_putch                              IMPORT  --
                           A  2686    ;bitmapid                              IX+6    
                           A  2687    
                           A  2688    
                           A  2689    ; Stack Frame Size: 9 (bytes)
                           A  2690    ;       Spill Code: 0 (instruction)
                           A  2691    
                           A  2692    
                           A  2693    .ENDFUNC "vdp_spriteAddFrameSelected",248,"_vdp
                           A  2694    ;  249	
                           A  2695    ;  250	void vdp_spriteAddFrame(UINT8 id, UINT8
                           A  2696    ;  251	{
040A39                     A  2697    _vdp_spriteAddFrame:
                           A  2698    .DEFINE "_vdp_spriteAddFrame"
                           A  2699    
                           A  2700    .VALUE _vdp_spriteAddFrame
                           A  2701    
                           A  2702    .CLASS 2
                           A  2703    
                           A  2704    .TYPE 65
                           A  2705    
                           A  2706    .ENDEF
                           A  2707    
                           A  2708    .BEGFUNC "vdp_spriteAddFrame",251,"_vdp_spriteA
                           A  2709    
                           A  2710    .LINE 251
                           A  2711    
                           A  2712    .DEFINE "id"
                           A  2713    
                           A  2714    .CLASS 65
                           A  2715    
                           A  2716    .VALUE 6
                           A  2717    
                           A  2718    .TYPE 12
                           A  2719    
                           A  2720    .ENDEF
                           A  2721    
                           A  2722    .DEFINE "bitmapid"
                           A  2723    
                           A  2724    .CLASS 65
                           A  2725    
                           A  2726    .VALUE 9
                           A  2727    
                           A  2728    .TYPE 12
                           A  2729    
                           A  2730    .ENDEF
                           A  2731    
040A39 DDE5                A  2732    	PUSH	IX
040A3B DD210000 00         A  2733    	LD	IX,0
040A40 DD39                A  2734    	ADD	IX,SP
                           A  2735    ;  252		vdp_spriteSelect(id);
                           A  2736    .LINE 252
                           A  2737    
040A42 DD4E06              A  2738    	LD	C,(IX+%6)
040A45 0600                A  2739    	LD	B,%0
040A47 C5                  A  2740    	PUSH	BC
040A48 CD 7E 09 04         A  2741    	CALL	_vdp_spriteSelect
040A4C C1                  A  2742    	POP	BC
                           A  2743    ;  253		vdp_spriteAddFrameSelected(bitmapid
                           A  2744    .LINE 253
                           A  2745    
040A4D DD4E09              A  2746    	LD	C,(IX+%9)
040A50 0600                A  2747    	LD	B,%0
040A52 C5                  A  2748    	PUSH	BC
040A53 CD 00 0A 04         A  2749    	CALL	_vdp_spriteAddFrameSelected
040A57 C1                  A  2750    	POP	BC
                           A  2751    ;  254		return;	
                           A  2752    ;  255	}
                           A  2753    .LINE 255
                           A  2754    
040A58 DDF9                A  2755    	LD	SP,IX
040A5A DDE1                A  2756    	POP	IX
040A5C C9                  A  2757    	RET	
                           A  2758    
                           A  2759    
                           A  2760    ;**************************** _vdp_spriteAddFra
                           A  2761    ;Name                         Addr/Register   S
                           A  2762    ;bitmapid                              IX+9    
                           A  2763    ;id                                    IX+6    
                           A  2764    
                           A  2765    
                           A  2766    ; Stack Frame Size: 12 (bytes)
                           A  2767    ;       Spill Code: 0 (instruction)
                           A  2768    
                           A  2769    
                           A  2770    .ENDFUNC "vdp_spriteAddFrame",255,"_vdp_spriteA
                           A  2771    ;  256	
                           A  2772    ;  257	void vdp_spriteNextFrameSelected(void)
                           A  2773    ;  258	{
040A5D                     A  2774    _vdp_spriteNextFrameSelected:
                           A  2775    .DEFINE "_vdp_spriteNextFrameSelected"
                           A  2776    
                           A  2777    .VALUE _vdp_spriteNextFrameSelected
                           A  2778    
                           A  2779    .CLASS 2
                           A  2780    
                           A  2781    .TYPE 65
                           A  2782    
                           A  2783    .ENDEF
                           A  2784    
                           A  2785    .BEGFUNC "vdp_spriteNextFrameSelected",258,"_vd
                           A  2786    
040A5D DDE5                A  2787    	PUSH	IX
040A5F DD210000 00         A  2788    	LD	IX,0
040A64 DD39                A  2789    	ADD	IX,SP
                           A  2790    ;  259		putch(23); // vdu_sys
                           A  2791    .LINE 259
                           A  2792    
040A66 01170000            A  2793    	LD	BC,23
040A6A C5                  A  2794    	PUSH	BC
040A6B CD C5 0E 04         A  2795    	CALL	_putch
040A6F C1                  A  2796    	POP	BC
                           A  2797    ;  260		putch(27); // sprite command
                           A  2798    .LINE 260
                           A  2799    
040A70 011B0000            A  2800    	LD	BC,27
040A74 C5                  A  2801    	PUSH	BC
040A75 CD C5 0E 04         A  2802    	CALL	_putch
040A79 C1                  A  2803    	POP	BC
                           A  2804    ;  261		putch(8);  // next frame
                           A  2805    .LINE 261
                           A  2806    
040A7A 01080000            A  2807    	LD	BC,8
040A7E C5                  A  2808    	PUSH	BC
040A7F CD C5 0E 04         A  2809    	CALL	_putch
040A83 C1                  A  2810    	POP	BC
                           A  2811    ;  262		return;			
                           A  2812    ;  263	}
                           A  2813    .LINE 263
                           A  2814    
040A84 DDF9                A  2815    	LD	SP,IX
040A86 DDE1                A  2816    	POP	IX
040A88 C9                  A  2817    	RET	
                           A  2818    
                           A  2819    
                           A  2820    ;**************************** _vdp_spriteNextFr
                           A  2821    ;Name                         Addr/Register   S
                           A  2822    ;_putch                              IMPORT  --
                           A  2823    
                           A  2824    
                           A  2825    ; Stack Frame Size: 6 (bytes)
                           A  2826    ;       Spill Code: 0 (instruction)
                           A  2827    
                           A  2828    
                           A  2829    .ENDFUNC "vdp_spriteNextFrameSelected",263,"_vd
                           A  2830    ;  264	
                           A  2831    ;  265	void vdp_spriteNextFrame(UINT8 id)
                           A  2832    ;  266	{
040A89                     A  2833    _vdp_spriteNextFrame:
                           A  2834    .DEFINE "_vdp_spriteNextFrame"
                           A  2835    
                           A  2836    .VALUE _vdp_spriteNextFrame
                           A  2837    
                           A  2838    .CLASS 2
                           A  2839    
                           A  2840    .TYPE 65
                           A  2841    
                           A  2842    .ENDEF
                           A  2843    
                           A  2844    .BEGFUNC "vdp_spriteNextFrame",266,"_vdp_sprite
                           A  2845    
                           A  2846    .LINE 266
                           A  2847    
                           A  2848    .DEFINE "id"
                           A  2849    
                           A  2850    .CLASS 65
                           A  2851    
                           A  2852    .VALUE 6
                           A  2853    
                           A  2854    .TYPE 12
                           A  2855    
                           A  2856    .ENDEF
                           A  2857    
040A89 DDE5                A  2858    	PUSH	IX
040A8B DD210000 00         A  2859    	LD	IX,0
040A90 DD39                A  2860    	ADD	IX,SP
                           A  2861    ;  267		vdp_spriteSelect(id);
                           A  2862    .LINE 267
                           A  2863    
040A92 DD4E06              A  2864    	LD	C,(IX+%6)
040A95 0600                A  2865    	LD	B,%0
040A97 C5                  A  2866    	PUSH	BC
040A98 CD 7E 09 04         A  2867    	CALL	_vdp_spriteSelect
040A9C C1                  A  2868    	POP	BC
                           A  2869    ;  268		vdp_spriteNextFrameSelected();
                           A  2870    .LINE 268
                           A  2871    
040A9D CD 5D 0A 04         A  2872    	CALL	_vdp_spriteNextFrameSelected
                           A  2873    ;  269		return;
                           A  2874    ;  270	}
                           A  2875    .LINE 270
                           A  2876    
040AA1 DDF9                A  2877    	LD	SP,IX
040AA3 DDE1                A  2878    	POP	IX
040AA5 C9                  A  2879    	RET	
                           A  2880    
                           A  2881    
                           A  2882    ;**************************** _vdp_spriteNextFr
                           A  2883    ;Name                         Addr/Register   S
                           A  2884    ;id                                    IX+6    
                           A  2885    
                           A  2886    
                           A  2887    ; Stack Frame Size: 9 (bytes)
                           A  2888    ;       Spill Code: 0 (instruction)
                           A  2889    
                           A  2890    
                           A  2891    .ENDFUNC "vdp_spriteNextFrame",270,"_vdp_sprite
                           A  2892    ;  271	
                           A  2893    ;  272	void vdp_spritePreviousFrameSelected(vo
                           A  2894    ;  273	{
040AA6                     A  2895    _vdp_spritePreviousFrameSelected:
                           A  2896    .DEFINE "_vdp_spritePreviousFrameSelected"
                           A  2897    
                           A  2898    .VALUE _vdp_spritePreviousFrameSelected
                           A  2899    
                           A  2900    .CLASS 2
                           A  2901    
                           A  2902    .TYPE 65
                           A  2903    
                           A  2904    .ENDEF
                           A  2905    
                           A  2906    .BEGFUNC "vdp_spritePreviousFrameSelected",273,
                           A  2907    
040AA6 DDE5                A  2908    	PUSH	IX
040AA8 DD210000 00         A  2909    	LD	IX,0
040AAD DD39                A  2910    	ADD	IX,SP
                           A  2911    ;  274		putch(23); // vdu_sys
                           A  2912    .LINE 274
                           A  2913    
040AAF 01170000            A  2914    	LD	BC,23
040AB3 C5                  A  2915    	PUSH	BC
040AB4 CD C5 0E 04         A  2916    	CALL	_putch
040AB8 C1                  A  2917    	POP	BC
                           A  2918    ;  275		putch(27); // sprite command
                           A  2919    .LINE 275
                           A  2920    
040AB9 011B0000            A  2921    	LD	BC,27
040ABD C5                  A  2922    	PUSH	BC
040ABE CD C5 0E 04         A  2923    	CALL	_putch
040AC2 C1                  A  2924    	POP	BC
                           A  2925    ;  276		putch(9); // previous frame
                           A  2926    .LINE 276
                           A  2927    
040AC3 01090000            A  2928    	LD	BC,9
040AC7 C5                  A  2929    	PUSH	BC
040AC8 CD C5 0E 04         A  2930    	CALL	_putch
040ACC C1                  A  2931    	POP	BC
                           A  2932    ;  277		return;	
                           A  2933    ;  278	}
                           A  2934    .LINE 278
                           A  2935    
040ACD DDF9                A  2936    	LD	SP,IX
040ACF DDE1                A  2937    	POP	IX
040AD1 C9                  A  2938    	RET	
                           A  2939    
                           A  2940    
                           A  2941    ;**************************** _vdp_spritePrevio
                           A  2942    ;Name                         Addr/Register   S
                           A  2943    ;_putch                              IMPORT  --
                           A  2944    
                           A  2945    
                           A  2946    ; Stack Frame Size: 6 (bytes)
                           A  2947    ;       Spill Code: 0 (instruction)
                           A  2948    
                           A  2949    
                           A  2950    .ENDFUNC "vdp_spritePreviousFrameSelected",278,
                           A  2951    ;  279	
                           A  2952    ;  280	void vdp_spritePreviousFrame(UINT8 id)
                           A  2953    ;  281	{
040AD2                     A  2954    _vdp_spritePreviousFrame:
                           A  2955    .DEFINE "_vdp_spritePreviousFrame"
                           A  2956    
                           A  2957    .VALUE _vdp_spritePreviousFrame
                           A  2958    
                           A  2959    .CLASS 2
                           A  2960    
                           A  2961    .TYPE 65
                           A  2962    
                           A  2963    .ENDEF
                           A  2964    
                           A  2965    .BEGFUNC "vdp_spritePreviousFrame",281,"_vdp_sp
                           A  2966    
                           A  2967    .LINE 281
                           A  2968    
                           A  2969    .DEFINE "id"
                           A  2970    
                           A  2971    .CLASS 65
                           A  2972    
                           A  2973    .VALUE 6
                           A  2974    
                           A  2975    .TYPE 12
                           A  2976    
                           A  2977    .ENDEF
                           A  2978    
040AD2 DDE5                A  2979    	PUSH	IX
040AD4 DD210000 00         A  2980    	LD	IX,0
040AD9 DD39                A  2981    	ADD	IX,SP
                           A  2982    ;  282		vdp_spriteSelect(id);
                           A  2983    .LINE 282
                           A  2984    
040ADB DD4E06              A  2985    	LD	C,(IX+%6)
040ADE 0600                A  2986    	LD	B,%0
040AE0 C5                  A  2987    	PUSH	BC
040AE1 CD 7E 09 04         A  2988    	CALL	_vdp_spriteSelect
040AE5 C1                  A  2989    	POP	BC
                           A  2990    ;  283		vdp_spritePreviousFrameSelected();
                           A  2991    .LINE 283
                           A  2992    
040AE6 CD A6 0A 04         A  2993    	CALL	_vdp_spritePreviousFrameSelected
                           A  2994    ;  284		return;
                           A  2995    ;  285	}
                           A  2996    .LINE 285
                           A  2997    
040AEA DDF9                A  2998    	LD	SP,IX
040AEC DDE1                A  2999    	POP	IX
040AEE C9                  A  3000    	RET	
                           A  3001    
                           A  3002    
                           A  3003    ;**************************** _vdp_spritePrevio
                           A  3004    ;Name                         Addr/Register   S
                           A  3005    ;id                                    IX+6    
                           A  3006    
                           A  3007    
                           A  3008    ; Stack Frame Size: 9 (bytes)
                           A  3009    ;       Spill Code: 0 (instruction)
                           A  3010    
                           A  3011    
                           A  3012    .ENDFUNC "vdp_spritePreviousFrame",285,"_vdp_sp
                           A  3013    ;  286	
                           A  3014    ;  287	void vdp_spriteSetFrameSelected(UINT8 f
                           A  3015    ;  288	{
040AEF                     A  3016    _vdp_spriteSetFrameSelected:
                           A  3017    .DEFINE "_vdp_spriteSetFrameSelected"
                           A  3018    
                           A  3019    .VALUE _vdp_spriteSetFrameSelected
                           A  3020    
                           A  3021    .CLASS 2
                           A  3022    
                           A  3023    .TYPE 65
                           A  3024    
                           A  3025    .ENDEF
                           A  3026    
                           A  3027    .BEGFUNC "vdp_spriteSetFrameSelected",288,"_vdp
                           A  3028    
                           A  3029    .LINE 288
                           A  3030    
                           A  3031    .DEFINE "framenumber"
                           A  3032    
                           A  3033    .CLASS 65
                           A  3034    
                           A  3035    .VALUE 6
                           A  3036    
                           A  3037    .TYPE 12
                           A  3038    
                           A  3039    .ENDEF
                           A  3040    
040AEF DDE5                A  3041    	PUSH	IX
040AF1 DD210000 00         A  3042    	LD	IX,0
040AF6 DD39                A  3043    	ADD	IX,SP
                           A  3044    ;  289		putch(23); // vdu_sys
                           A  3045    .LINE 289
                           A  3046    
040AF8 01170000            A  3047    	LD	BC,23
040AFC C5                  A  3048    	PUSH	BC
040AFD CD C5 0E 04         A  3049    	CALL	_putch
040B01 C1                  A  3050    	POP	BC
                           A  3051    ;  290		putch(27); // sprite command
                           A  3052    .LINE 290
                           A  3053    
040B02 011B0000            A  3054    	LD	BC,27
040B06 C5                  A  3055    	PUSH	BC
040B07 CD C5 0E 04         A  3056    	CALL	_putch
040B0B C1                  A  3057    	POP	BC
                           A  3058    ;  291		putch(10); // set current frame
                           A  3059    .LINE 291
                           A  3060    
040B0C 010A0000            A  3061    	LD	BC,10
040B10 C5                  A  3062    	PUSH	BC
040B11 CD C5 0E 04         A  3063    	CALL	_putch
040B15 C1                  A  3064    	POP	BC
                           A  3065    ;  292		putch(framenumber);
                           A  3066    .LINE 292
                           A  3067    
040B16 DD7E06              A  3068    	LD	A,(IX+%6)
040B19 B7ED62              A  3069    	UEXT	HL
040B1C 6F                  A  3070    	LD	L,A
040B1D E5                  A  3071    	PUSH	HL
040B1E CD C5 0E 04         A  3072    	CALL	_putch
040B22 C1                  A  3073    	POP	BC
                           A  3074    ;  293		return;	
                           A  3075    ;  294	}
                           A  3076    .LINE 294
                           A  3077    
040B23 DDF9                A  3078    	LD	SP,IX
040B25 DDE1                A  3079    	POP	IX
040B27 C9                  A  3080    	RET	
                           A  3081    
                           A  3082    
                           A  3083    ;**************************** _vdp_spriteSetFra
                           A  3084    ;Name                         Addr/Register   S
                           A  3085    ;_putch                              IMPORT  --
                           A  3086    ;framenumber                           IX+6    
                           A  3087    
                           A  3088    
                           A  3089    ; Stack Frame Size: 9 (bytes)
                           A  3090    ;       Spill Code: 0 (instruction)
                           A  3091    
                           A  3092    
                           A  3093    .ENDFUNC "vdp_spriteSetFrameSelected",294,"_vdp
                           A  3094    ;  295	
                           A  3095    ;  296	void vdp_spriteSetFrame(UINT8 id, UINT8
                           A  3096    ;  297	{
040B28                     A  3097    _vdp_spriteSetFrame:
                           A  3098    .DEFINE "_vdp_spriteSetFrame"
                           A  3099    
                           A  3100    .VALUE _vdp_spriteSetFrame
                           A  3101    
                           A  3102    .CLASS 2
                           A  3103    
                           A  3104    .TYPE 65
                           A  3105    
                           A  3106    .ENDEF
                           A  3107    
                           A  3108    .BEGFUNC "vdp_spriteSetFrame",297,"_vdp_spriteS
                           A  3109    
                           A  3110    .LINE 297
                           A  3111    
                           A  3112    .DEFINE "id"
                           A  3113    
                           A  3114    .CLASS 65
                           A  3115    
                           A  3116    .VALUE 6
                           A  3117    
                           A  3118    .TYPE 12
                           A  3119    
                           A  3120    .ENDEF
                           A  3121    
                           A  3122    .DEFINE "framenumber"
                           A  3123    
                           A  3124    .CLASS 65
                           A  3125    
                           A  3126    .VALUE 9
                           A  3127    
                           A  3128    .TYPE 12
                           A  3129    
                           A  3130    .ENDEF
                           A  3131    
040B28 DDE5                A  3132    	PUSH	IX
040B2A DD210000 00         A  3133    	LD	IX,0
040B2F DD39                A  3134    	ADD	IX,SP
                           A  3135    ;  298		vdp_spriteSelect(id);
                           A  3136    .LINE 298
                           A  3137    
040B31 DD4E06              A  3138    	LD	C,(IX+%6)
040B34 0600                A  3139    	LD	B,%0
040B36 C5                  A  3140    	PUSH	BC
040B37 CD 7E 09 04         A  3141    	CALL	_vdp_spriteSelect
040B3B C1                  A  3142    	POP	BC
                           A  3143    ;  299		vdp_spriteNextFrameSelected();
                           A  3144    .LINE 299
                           A  3145    
040B3C CD 5D 0A 04         A  3146    	CALL	_vdp_spriteNextFrameSelected
                           A  3147    ;  300		return;
                           A  3148    ;  301	}
                           A  3149    .LINE 301
                           A  3150    
040B40 DDF9                A  3151    	LD	SP,IX
040B42 DDE1                A  3152    	POP	IX
040B44 C9                  A  3153    	RET	
                           A  3154    
                           A  3155    
                           A  3156    ;**************************** _vdp_spriteSetFra
                           A  3157    ;Name                         Addr/Register   S
                           A  3158    ;framenumber                           IX+9    
                           A  3159    ;id                                    IX+6    
                           A  3160    
                           A  3161    
                           A  3162    ; Stack Frame Size: 12 (bytes)
                           A  3163    ;       Spill Code: 0 (instruction)
                           A  3164    
                           A  3165    
                           A  3166    .ENDFUNC "vdp_spriteSetFrame",301,"_vdp_spriteS
                           A  3167    ;  302	
                           A  3168    ;  303	void vdp_spriteShowSelected(void)
                           A  3169    ;  304	{
040B45                     A  3170    _vdp_spriteShowSelected:
                           A  3171    .DEFINE "_vdp_spriteShowSelected"
                           A  3172    
                           A  3173    .VALUE _vdp_spriteShowSelected
                           A  3174    
                           A  3175    .CLASS 2
                           A  3176    
                           A  3177    .TYPE 65
                           A  3178    
                           A  3179    .ENDEF
                           A  3180    
                           A  3181    .BEGFUNC "vdp_spriteShowSelected",304,"_vdp_spr
                           A  3182    
040B45 DDE5                A  3183    	PUSH	IX
040B47 DD210000 00         A  3184    	LD	IX,0
040B4C DD39                A  3185    	ADD	IX,SP
                           A  3186    ;  305		putch(23); // vdu_sys
                           A  3187    .LINE 305
                           A  3188    
040B4E 01170000            A  3189    	LD	BC,23
040B52 C5                  A  3190    	PUSH	BC
040B53 CD C5 0E 04         A  3191    	CALL	_putch
040B57 C1                  A  3192    	POP	BC
                           A  3193    ;  306		putch(27); // sprite command
                           A  3194    .LINE 306
                           A  3195    
040B58 011B0000            A  3196    	LD	BC,27
040B5C C5                  A  3197    	PUSH	BC
040B5D CD C5 0E 04         A  3198    	CALL	_putch
040B61 C1                  A  3199    	POP	BC
                           A  3200    ;  307		putch(11); // show sprite
                           A  3201    .LINE 307
                           A  3202    
040B62 010B0000            A  3203    	LD	BC,11
040B66 C5                  A  3204    	PUSH	BC
040B67 CD C5 0E 04         A  3205    	CALL	_putch
040B6B C1                  A  3206    	POP	BC
                           A  3207    ;  308		return;			
                           A  3208    ;  309	}
                           A  3209    .LINE 309
                           A  3210    
040B6C DDF9                A  3211    	LD	SP,IX
040B6E DDE1                A  3212    	POP	IX
040B70 C9                  A  3213    	RET	
                           A  3214    
                           A  3215    
                           A  3216    ;**************************** _vdp_spriteShowSe
                           A  3217    ;Name                         Addr/Register   S
                           A  3218    ;_putch                              IMPORT  --
                           A  3219    
                           A  3220    
                           A  3221    ; Stack Frame Size: 6 (bytes)
                           A  3222    ;       Spill Code: 0 (instruction)
                           A  3223    
                           A  3224    
                           A  3225    .ENDFUNC "vdp_spriteShowSelected",309,"_vdp_spr
                           A  3226    ;  310	
                           A  3227    ;  311	void vdp_spriteShow(UINT8 id)
                           A  3228    ;  312	{
040B71                     A  3229    _vdp_spriteShow:
                           A  3230    .DEFINE "_vdp_spriteShow"
                           A  3231    
                           A  3232    .VALUE _vdp_spriteShow
                           A  3233    
                           A  3234    .CLASS 2
                           A  3235    
                           A  3236    .TYPE 65
                           A  3237    
                           A  3238    .ENDEF
                           A  3239    
                           A  3240    .BEGFUNC "vdp_spriteShow",312,"_vdp_spriteShow"
                           A  3241    
                           A  3242    .LINE 312
                           A  3243    
                           A  3244    .DEFINE "id"
                           A  3245    
                           A  3246    .CLASS 65
                           A  3247    
                           A  3248    .VALUE 6
                           A  3249    
                           A  3250    .TYPE 12
                           A  3251    
                           A  3252    .ENDEF
                           A  3253    
040B71 DDE5                A  3254    	PUSH	IX
040B73 DD210000 00         A  3255    	LD	IX,0
040B78 DD39                A  3256    	ADD	IX,SP
                           A  3257    ;  313		vdp_spriteSelect(id);
                           A  3258    .LINE 313
                           A  3259    
040B7A DD4E06              A  3260    	LD	C,(IX+%6)
040B7D 0600                A  3261    	LD	B,%0
040B7F C5                  A  3262    	PUSH	BC
040B80 CD 7E 09 04         A  3263    	CALL	_vdp_spriteSelect
040B84 C1                  A  3264    	POP	BC
                           A  3265    ;  314		vdp_spriteShowSelected();
                           A  3266    .LINE 314
                           A  3267    
040B85 CD 45 0B 04         A  3268    	CALL	_vdp_spriteShowSelected
                           A  3269    ;  315		return;
                           A  3270    ;  316	}
                           A  3271    .LINE 316
                           A  3272    
040B89 DDF9                A  3273    	LD	SP,IX
040B8B DDE1                A  3274    	POP	IX
040B8D C9                  A  3275    	RET	
                           A  3276    
                           A  3277    
                           A  3278    ;**************************** _vdp_spriteShow *
                           A  3279    ;Name                         Addr/Register   S
                           A  3280    ;id                                    IX+6    
                           A  3281    
                           A  3282    
                           A  3283    ; Stack Frame Size: 9 (bytes)
                           A  3284    ;       Spill Code: 0 (instruction)
                           A  3285    
                           A  3286    
                           A  3287    .ENDFUNC "vdp_spriteShow",316,"_vdp_spriteShow"
                           A  3288    ;  317	
                           A  3289    ;  318	void vdp_spriteHideSelected(void)
                           A  3290    ;  319	{
040B8E                     A  3291    _vdp_spriteHideSelected:
                           A  3292    .DEFINE "_vdp_spriteHideSelected"
                           A  3293    
                           A  3294    .VALUE _vdp_spriteHideSelected
                           A  3295    
                           A  3296    .CLASS 2
                           A  3297    
                           A  3298    .TYPE 65
                           A  3299    
                           A  3300    .ENDEF
                           A  3301    
                           A  3302    .BEGFUNC "vdp_spriteHideSelected",319,"_vdp_spr
                           A  3303    
040B8E DDE5                A  3304    	PUSH	IX
040B90 DD210000 00         A  3305    	LD	IX,0
040B95 DD39                A  3306    	ADD	IX,SP
                           A  3307    ;  320		putch(23); // vdu_sys
                           A  3308    .LINE 320
                           A  3309    
040B97 01170000            A  3310    	LD	BC,23
040B9B C5                  A  3311    	PUSH	BC
040B9C CD C5 0E 04         A  3312    	CALL	_putch
040BA0 C1                  A  3313    	POP	BC
                           A  3314    ;  321		putch(27); // sprite command
                           A  3315    .LINE 321
                           A  3316    
040BA1 011B0000            A  3317    	LD	BC,27
040BA5 C5                  A  3318    	PUSH	BC
040BA6 CD C5 0E 04         A  3319    	CALL	_putch
040BAA C1                  A  3320    	POP	BC
                           A  3321    ;  322		putch(12); // hide sprite
                           A  3322    .LINE 322
                           A  3323    
040BAB 010C0000            A  3324    	LD	BC,12
040BAF C5                  A  3325    	PUSH	BC
040BB0 CD C5 0E 04         A  3326    	CALL	_putch
040BB4 C1                  A  3327    	POP	BC
                           A  3328    ;  323		return;		
                           A  3329    ;  324	}
                           A  3330    .LINE 324
                           A  3331    
040BB5 DDF9                A  3332    	LD	SP,IX
040BB7 DDE1                A  3333    	POP	IX
040BB9 C9                  A  3334    	RET	
                           A  3335    
                           A  3336    
                           A  3337    ;**************************** _vdp_spriteHideSe
                           A  3338    ;Name                         Addr/Register   S
                           A  3339    ;_putch                              IMPORT  --
                           A  3340    
                           A  3341    
                           A  3342    ; Stack Frame Size: 6 (bytes)
                           A  3343    ;       Spill Code: 0 (instruction)
                           A  3344    
                           A  3345    
                           A  3346    .ENDFUNC "vdp_spriteHideSelected",324,"_vdp_spr
                           A  3347    ;  325	
                           A  3348    ;  326	void vdp_spriteHide(UINT8 id)
                           A  3349    ;  327	{
040BBA                     A  3350    _vdp_spriteHide:
                           A  3351    .DEFINE "_vdp_spriteHide"
                           A  3352    
                           A  3353    .VALUE _vdp_spriteHide
                           A  3354    
                           A  3355    .CLASS 2
                           A  3356    
                           A  3357    .TYPE 65
                           A  3358    
                           A  3359    .ENDEF
                           A  3360    
                           A  3361    .BEGFUNC "vdp_spriteHide",327,"_vdp_spriteHide"
                           A  3362    
                           A  3363    .LINE 327
                           A  3364    
                           A  3365    .DEFINE "id"
                           A  3366    
                           A  3367    .CLASS 65
                           A  3368    
                           A  3369    .VALUE 6
                           A  3370    
                           A  3371    .TYPE 12
                           A  3372    
                           A  3373    .ENDEF
                           A  3374    
040BBA DDE5                A  3375    	PUSH	IX
040BBC DD210000 00         A  3376    	LD	IX,0
040BC1 DD39                A  3377    	ADD	IX,SP
                           A  3378    ;  328		vdp_spriteSelect(id);
                           A  3379    .LINE 328
                           A  3380    
040BC3 DD4E06              A  3381    	LD	C,(IX+%6)
040BC6 0600                A  3382    	LD	B,%0
040BC8 C5                  A  3383    	PUSH	BC
040BC9 CD 7E 09 04         A  3384    	CALL	_vdp_spriteSelect
040BCD C1                  A  3385    	POP	BC
                           A  3386    ;  329		vdp_spriteHideSelected();
                           A  3387    .LINE 329
                           A  3388    
040BCE CD 8E 0B 04         A  3389    	CALL	_vdp_spriteHideSelected
                           A  3390    ;  330		return;
                           A  3391    ;  331	}
                           A  3392    .LINE 331
                           A  3393    
040BD2 DDF9                A  3394    	LD	SP,IX
040BD4 DDE1                A  3395    	POP	IX
040BD6 C9                  A  3396    	RET	
                           A  3397    
                           A  3398    
                           A  3399    ;**************************** _vdp_spriteHide *
                           A  3400    ;Name                         Addr/Register   S
                           A  3401    ;id                                    IX+6    
                           A  3402    
                           A  3403    
                           A  3404    ; Stack Frame Size: 9 (bytes)
                           A  3405    ;       Spill Code: 0 (instruction)
                           A  3406    
                           A  3407    
                           A  3408    .ENDFUNC "vdp_spriteHide",331,"_vdp_spriteHide"
                           A  3409    ;  332	
                           A  3410    ;  333	void vdp_spriteMoveToSelected(UINT16 x,
                           A  3411    ;  334	{
040BD7                     A  3412    _vdp_spriteMoveToSelected:
                           A  3413    .DEFINE "_vdp_spriteMoveToSelected"
                           A  3414    
                           A  3415    .VALUE _vdp_spriteMoveToSelected
                           A  3416    
                           A  3417    .CLASS 2
                           A  3418    
                           A  3419    .TYPE 65
                           A  3420    
                           A  3421    .ENDEF
                           A  3422    
                           A  3423    .BEGFUNC "vdp_spriteMoveToSelected",334,"_vdp_s
                           A  3424    
                           A  3425    .LINE 334
                           A  3426    
                           A  3427    .DEFINE "x"
                           A  3428    
                           A  3429    .CLASS 65
                           A  3430    
                           A  3431    .VALUE 6
                           A  3432    
                           A  3433    .TYPE 13
                           A  3434    
                           A  3435    .ENDEF
                           A  3436    
                           A  3437    .DEFINE "y"
                           A  3438    
                           A  3439    .CLASS 65
                           A  3440    
                           A  3441    .VALUE 9
                           A  3442    
                           A  3443    .TYPE 13
                           A  3444    
                           A  3445    .ENDEF
                           A  3446    
040BD7 DDE5                A  3447    	PUSH	IX
040BD9 DD210000 00         A  3448    	LD	IX,0
040BDE DD39                A  3449    	ADD	IX,SP
                           A  3450    ;  335		putch(23); // vdu_sys
                           A  3451    .LINE 335
                           A  3452    
040BE0 01170000            A  3453    	LD	BC,23
040BE4 C5                  A  3454    	PUSH	BC
040BE5 CD C5 0E 04         A  3455    	CALL	_putch
040BE9 C1                  A  3456    	POP	BC
                           A  3457    ;  336		putch(27); // sprite command
                           A  3458    .LINE 336
                           A  3459    
040BEA 011B0000            A  3460    	LD	BC,27
040BEE C5                  A  3461    	PUSH	BC
040BEF CD C5 0E 04         A  3462    	CALL	_putch
040BF3 C1                  A  3463    	POP	BC
                           A  3464    ;  337		putch(13); // move to
                           A  3465    .LINE 337
                           A  3466    
040BF4 010D0000            A  3467    	LD	BC,13
040BF8 C5                  A  3468    	PUSH	BC
040BF9 CD C5 0E 04         A  3469    	CALL	_putch
040BFD C1                  A  3470    	POP	BC
                           A  3471    ;  338		write16bit(x);
                           A  3472    .LINE 338
                           A  3473    
040BFE DD0706              A  3474    	LD	BC,(IX+%6)
040C01 C5                  A  3475    	PUSH	BC
040C02 CD B9 03 04         A  3476    	CALL	_write16bit
040C06 C1                  A  3477    	POP	BC
                           A  3478    ;  339		write16bit(y);
                           A  3479    .LINE 339
                           A  3480    
040C07 DD0709              A  3481    	LD	BC,(IX+%9)
040C0A C5                  A  3482    	PUSH	BC
040C0B CD B9 03 04         A  3483    	CALL	_write16bit
040C0F C1                  A  3484    	POP	BC
                           A  3485    ;  340		return;	
                           A  3486    ;  341	}
                           A  3487    .LINE 341
                           A  3488    
040C10 DDF9                A  3489    	LD	SP,IX
040C12 DDE1                A  3490    	POP	IX
040C14 C9                  A  3491    	RET	
                           A  3492    
                           A  3493    
                           A  3494    ;**************************** _vdp_spriteMoveTo
                           A  3495    ;Name                         Addr/Register   S
                           A  3496    ;_putch                              IMPORT  --
                           A  3497    ;y                                     IX+9    
                           A  3498    ;x                                     IX+6    
                           A  3499    
                           A  3500    
                           A  3501    ; Stack Frame Size: 12 (bytes)
                           A  3502    ;       Spill Code: 0 (instruction)
                           A  3503    
                           A  3504    
                           A  3505    .ENDFUNC "vdp_spriteMoveToSelected",341,"_vdp_s
                           A  3506    ;  342	
                           A  3507    ;  343	void vdp_spriteMoveTo(UINT8 id, UINT16 
                           A  3508    ;  344	{
040C15                     A  3509    _vdp_spriteMoveTo:
                           A  3510    .DEFINE "_vdp_spriteMoveTo"
                           A  3511    
                           A  3512    .VALUE _vdp_spriteMoveTo
                           A  3513    
                           A  3514    .CLASS 2
                           A  3515    
                           A  3516    .TYPE 65
                           A  3517    
                           A  3518    .ENDEF
                           A  3519    
                           A  3520    .BEGFUNC "vdp_spriteMoveTo",344,"_vdp_spriteMov
                           A  3521    
                           A  3522    .LINE 344
                           A  3523    
                           A  3524    .DEFINE "id"
                           A  3525    
                           A  3526    .CLASS 65
                           A  3527    
                           A  3528    .VALUE 6
                           A  3529    
                           A  3530    .TYPE 12
                           A  3531    
                           A  3532    .ENDEF
                           A  3533    
                           A  3534    .DEFINE "x"
                           A  3535    
                           A  3536    .CLASS 65
                           A  3537    
                           A  3538    .VALUE 9
                           A  3539    
                           A  3540    .TYPE 13
                           A  3541    
                           A  3542    .ENDEF
                           A  3543    
                           A  3544    .DEFINE "y"
                           A  3545    
                           A  3546    .CLASS 65
                           A  3547    
                           A  3548    .VALUE 12
                           A  3549    
                           A  3550    .TYPE 13
                           A  3551    
                           A  3552    .ENDEF
                           A  3553    
040C15 DDE5                A  3554    	PUSH	IX
040C17 DD210000 00         A  3555    	LD	IX,0
040C1C DD39                A  3556    	ADD	IX,SP
                           A  3557    ;  345		vdp_spriteSelect(id);
                           A  3558    .LINE 345
                           A  3559    
040C1E DD4E06              A  3560    	LD	C,(IX+%6)
040C21 0600                A  3561    	LD	B,%0
040C23 C5                  A  3562    	PUSH	BC
040C24 CD 7E 09 04         A  3563    	CALL	_vdp_spriteSelect
040C28 C1                  A  3564    	POP	BC
                           A  3565    ;  346		vdp_spriteMoveToSelected(x,y);
                           A  3566    .LINE 346
                           A  3567    
040C29 DD070C              A  3568    	LD	BC,(IX+%C)
040C2C C5                  A  3569    	PUSH	BC
040C2D DD0709              A  3570    	LD	BC,(IX+%9)
040C30 C5                  A  3571    	PUSH	BC
040C31 CD D7 0B 04         A  3572    	CALL	_vdp_spriteMoveToSelected
040C35 C1                  A  3573    	POP	BC
040C36 C1                  A  3574    	POP	BC
                           A  3575    ;  347		return;
                           A  3576    ;  348	}
                           A  3577    .LINE 348
                           A  3578    
040C37 DDF9                A  3579    	LD	SP,IX
040C39 DDE1                A  3580    	POP	IX
040C3B C9                  A  3581    	RET	
                           A  3582    
                           A  3583    
                           A  3584    ;**************************** _vdp_spriteMoveTo
                           A  3585    ;Name                         Addr/Register   S
                           A  3586    ;y                                    IX+12    
                           A  3587    ;x                                     IX+9    
                           A  3588    ;id                                    IX+6    
                           A  3589    
                           A  3590    
                           A  3591    ; Stack Frame Size: 15 (bytes)
                           A  3592    ;       Spill Code: 0 (instruction)
                           A  3593    
                           A  3594    
                           A  3595    .ENDFUNC "vdp_spriteMoveTo",348,"_vdp_spriteMov
                           A  3596    ;  349	
                           A  3597    ;  350	void vdp_spriteMoveBySelected(UINT16 x,
                           A  3598    ;  351	{
040C3C                     A  3599    _vdp_spriteMoveBySelected:
                           A  3600    .DEFINE "_vdp_spriteMoveBySelected"
                           A  3601    
                           A  3602    .VALUE _vdp_spriteMoveBySelected
                           A  3603    
                           A  3604    .CLASS 2
                           A  3605    
                           A  3606    .TYPE 65
                           A  3607    
                           A  3608    .ENDEF
                           A  3609    
                           A  3610    .BEGFUNC "vdp_spriteMoveBySelected",351,"_vdp_s
                           A  3611    
                           A  3612    .LINE 351
                           A  3613    
                           A  3614    .DEFINE "x"
                           A  3615    
                           A  3616    .CLASS 65
                           A  3617    
                           A  3618    .VALUE 6
                           A  3619    
                           A  3620    .TYPE 13
                           A  3621    
                           A  3622    .ENDEF
                           A  3623    
                           A  3624    .DEFINE "y"
                           A  3625    
                           A  3626    .CLASS 65
                           A  3627    
                           A  3628    .VALUE 9
                           A  3629    
                           A  3630    .TYPE 13
                           A  3631    
                           A  3632    .ENDEF
                           A  3633    
040C3C DDE5                A  3634    	PUSH	IX
040C3E DD210000 00         A  3635    	LD	IX,0
040C43 DD39                A  3636    	ADD	IX,SP
                           A  3637    ;  352		putch(23); // vdu_sys
                           A  3638    .LINE 352
                           A  3639    
040C45 01170000            A  3640    	LD	BC,23
040C49 C5                  A  3641    	PUSH	BC
040C4A CD C5 0E 04         A  3642    	CALL	_putch
040C4E C1                  A  3643    	POP	BC
                           A  3644    ;  353		putch(27); // sprite command
                           A  3645    .LINE 353
                           A  3646    
040C4F 011B0000            A  3647    	LD	BC,27
040C53 C5                  A  3648    	PUSH	BC
040C54 CD C5 0E 04         A  3649    	CALL	_putch
040C58 C1                  A  3650    	POP	BC
                           A  3651    ;  354		putch(14); // move by
                           A  3652    .LINE 354
                           A  3653    
040C59 010E0000            A  3654    	LD	BC,14
040C5D C5                  A  3655    	PUSH	BC
040C5E CD C5 0E 04         A  3656    	CALL	_putch
040C62 C1                  A  3657    	POP	BC
                           A  3658    ;  355		write16bit(x);
                           A  3659    .LINE 355
                           A  3660    
040C63 DD0706              A  3661    	LD	BC,(IX+%6)
040C66 C5                  A  3662    	PUSH	BC
040C67 CD B9 03 04         A  3663    	CALL	_write16bit
040C6B C1                  A  3664    	POP	BC
                           A  3665    ;  356		write16bit(y);
                           A  3666    .LINE 356
                           A  3667    
040C6C DD0709              A  3668    	LD	BC,(IX+%9)
040C6F C5                  A  3669    	PUSH	BC
040C70 CD B9 03 04         A  3670    	CALL	_write16bit
040C74 C1                  A  3671    	POP	BC
                           A  3672    ;  357		return;	
                           A  3673    ;  358	}
                           A  3674    .LINE 358
                           A  3675    
040C75 DDF9                A  3676    	LD	SP,IX
040C77 DDE1                A  3677    	POP	IX
040C79 C9                  A  3678    	RET	
                           A  3679    
                           A  3680    
                           A  3681    ;**************************** _vdp_spriteMoveBy
                           A  3682    ;Name                         Addr/Register   S
                           A  3683    ;_putch                              IMPORT  --
                           A  3684    ;y                                     IX+9    
                           A  3685    ;x                                     IX+6    
                           A  3686    
                           A  3687    
                           A  3688    ; Stack Frame Size: 12 (bytes)
                           A  3689    ;       Spill Code: 0 (instruction)
                           A  3690    
                           A  3691    
                           A  3692    .ENDFUNC "vdp_spriteMoveBySelected",358,"_vdp_s
                           A  3693    ;  359	
                           A  3694    ;  360	void vdp_spriteMoveBy(UINT8 id, UINT16 
                           A  3695    ;  361	{
040C7A                     A  3696    _vdp_spriteMoveBy:
                           A  3697    .DEFINE "_vdp_spriteMoveBy"
                           A  3698    
                           A  3699    .VALUE _vdp_spriteMoveBy
                           A  3700    
                           A  3701    .CLASS 2
                           A  3702    
                           A  3703    .TYPE 65
                           A  3704    
                           A  3705    .ENDEF
                           A  3706    
                           A  3707    .BEGFUNC "vdp_spriteMoveBy",361,"_vdp_spriteMov
                           A  3708    
                           A  3709    .LINE 361
                           A  3710    
                           A  3711    .DEFINE "id"
                           A  3712    
                           A  3713    .CLASS 65
                           A  3714    
                           A  3715    .VALUE 6
                           A  3716    
                           A  3717    .TYPE 12
                           A  3718    
                           A  3719    .ENDEF
                           A  3720    
                           A  3721    .DEFINE "x"
                           A  3722    
                           A  3723    .CLASS 65
                           A  3724    
                           A  3725    .VALUE 9
                           A  3726    
                           A  3727    .TYPE 13
                           A  3728    
                           A  3729    .ENDEF
                           A  3730    
                           A  3731    .DEFINE "y"
                           A  3732    
                           A  3733    .CLASS 65
                           A  3734    
                           A  3735    .VALUE 12
                           A  3736    
                           A  3737    .TYPE 13
                           A  3738    
                           A  3739    .ENDEF
                           A  3740    
040C7A DDE5                A  3741    	PUSH	IX
040C7C DD210000 00         A  3742    	LD	IX,0
040C81 DD39                A  3743    	ADD	IX,SP
                           A  3744    ;  362		vdp_spriteSelect(id);
                           A  3745    .LINE 362
                           A  3746    
040C83 DD4E06              A  3747    	LD	C,(IX+%6)
040C86 0600                A  3748    	LD	B,%0
040C88 C5                  A  3749    	PUSH	BC
040C89 CD 7E 09 04         A  3750    	CALL	_vdp_spriteSelect
040C8D C1                  A  3751    	POP	BC
                           A  3752    ;  363		vdp_spriteMoveBySelected(x,y);
                           A  3753    .LINE 363
                           A  3754    
040C8E DD070C              A  3755    	LD	BC,(IX+%C)
040C91 C5                  A  3756    	PUSH	BC
040C92 DD0709              A  3757    	LD	BC,(IX+%9)
040C95 C5                  A  3758    	PUSH	BC
040C96 CD 3C 0C 04         A  3759    	CALL	_vdp_spriteMoveBySelected
040C9A C1                  A  3760    	POP	BC
040C9B C1                  A  3761    	POP	BC
                           A  3762    ;  364		return;
                           A  3763    ;  365	}
                           A  3764    .LINE 365
                           A  3765    
040C9C DDF9                A  3766    	LD	SP,IX
040C9E DDE1                A  3767    	POP	IX
040CA0 C9                  A  3768    	RET	
                           A  3769    
                           A  3770    
                           A  3771    ;**************************** _vdp_spriteMoveBy
                           A  3772    ;Name                         Addr/Register   S
                           A  3773    ;y                                    IX+12    
                           A  3774    ;x                                     IX+9    
                           A  3775    ;id                                    IX+6    
                           A  3776    
                           A  3777    
                           A  3778    ; Stack Frame Size: 15 (bytes)
                           A  3779    ;       Spill Code: 0 (instruction)
                           A  3780    
                           A  3781    
                           A  3782    .ENDFUNC "vdp_spriteMoveBy",365,"_vdp_spriteMov
                           A  3783    ;  366	
                           A  3784    ;  367	void vdp_spriteActivateTotal(UINT8 numb
                           A  3785    ;  368	{
040CA1                     A  3786    _vdp_spriteActivateTotal:
                           A  3787    .DEFINE "_vdp_spriteActivateTotal"
                           A  3788    
                           A  3789    .VALUE _vdp_spriteActivateTotal
                           A  3790    
                           A  3791    .CLASS 2
                           A  3792    
                           A  3793    .TYPE 65
                           A  3794    
                           A  3795    .ENDEF
                           A  3796    
                           A  3797    .BEGFUNC "vdp_spriteActivateTotal",368,"_vdp_sp
                           A  3798    
                           A  3799    .LINE 368
                           A  3800    
                           A  3801    .DEFINE "number"
                           A  3802    
                           A  3803    .CLASS 65
                           A  3804    
                           A  3805    .VALUE 6
                           A  3806    
                           A  3807    .TYPE 12
                           A  3808    
                           A  3809    .ENDEF
                           A  3810    
040CA1 DDE5                A  3811    	PUSH	IX
040CA3 DD210000 00         A  3812    	LD	IX,0
040CA8 DD39                A  3813    	ADD	IX,SP
                           A  3814    ;  369		putch(23); // vdu_sys
                           A  3815    .LINE 369
                           A  3816    
040CAA 01170000            A  3817    	LD	BC,23
040CAE C5                  A  3818    	PUSH	BC
040CAF CD C5 0E 04         A  3819    	CALL	_putch
040CB3 C1                  A  3820    	POP	BC
                           A  3821    ;  370		putch(27); // sprite command
                           A  3822    .LINE 370
                           A  3823    
040CB4 011B0000            A  3824    	LD	BC,27
040CB8 C5                  A  3825    	PUSH	BC
040CB9 CD C5 0E 04         A  3826    	CALL	_putch
040CBD C1                  A  3827    	POP	BC
                           A  3828    ;  371		putch(7);  // set number of sprites
                           A  3829    .LINE 371
                           A  3830    
040CBE 01070000            A  3831    	LD	BC,7
040CC2 C5                  A  3832    	PUSH	BC
040CC3 CD C5 0E 04         A  3833    	CALL	_putch
040CC7 C1                  A  3834    	POP	BC
                           A  3835    ;  372		putch(number);
                           A  3836    .LINE 372
                           A  3837    
040CC8 DD7E06              A  3838    	LD	A,(IX+%6)
040CCB B7ED62              A  3839    	UEXT	HL
040CCE 6F                  A  3840    	LD	L,A
040CCF E5                  A  3841    	PUSH	HL
040CD0 CD C5 0E 04         A  3842    	CALL	_putch
040CD4 C1                  A  3843    	POP	BC
                           A  3844    ;  373		return;	
                           A  3845    ;  374	}
                           A  3846    .LINE 374
                           A  3847    
040CD5 DDF9                A  3848    	LD	SP,IX
040CD7 DDE1                A  3849    	POP	IX
040CD9 C9                  A  3850    	RET	
                           A  3851    
                           A  3852    
                           A  3853    ;**************************** _vdp_spriteActiva
                           A  3854    ;Name                         Addr/Register   S
                           A  3855    ;_putch                              IMPORT  --
                           A  3856    ;number                                IX+6    
                           A  3857    
                           A  3858    
                           A  3859    ; Stack Frame Size: 9 (bytes)
                           A  3860    ;       Spill Code: 0 (instruction)
                           A  3861    
                           A  3862    
                           A  3863    .ENDFUNC "vdp_spriteActivateTotal",374,"_vdp_sp
                           A  3864    ;  375	
                           A  3865    ;  376	void vdp_spriteRefresh(void)
                           A  3866    ;  377	{
040CDA                     A  3867    _vdp_spriteRefresh:
                           A  3868    .DEFINE "_vdp_spriteRefresh"
                           A  3869    
                           A  3870    .VALUE _vdp_spriteRefresh
                           A  3871    
                           A  3872    .CLASS 2
                           A  3873    
                           A  3874    .TYPE 65
                           A  3875    
                           A  3876    .ENDEF
                           A  3877    
                           A  3878    .BEGFUNC "vdp_spriteRefresh",377,"_vdp_spriteRe
                           A  3879    
040CDA DDE5                A  3880    	PUSH	IX
040CDC DD210000 00         A  3881    	LD	IX,0
040CE1 DD39                A  3882    	ADD	IX,SP
                           A  3883    ;  378		putch(23);	// vdu_sys
                           A  3884    .LINE 378
                           A  3885    
040CE3 01170000            A  3886    	LD	BC,23
040CE7 C5                  A  3887    	PUSH	BC
040CE8 CD C5 0E 04         A  3888    	CALL	_putch
040CEC C1                  A  3889    	POP	BC
                           A  3890    ;  379		putch(27);	// sprite command
                           A  3891    .LINE 379
                           A  3892    
040CED 011B0000            A  3893    	LD	BC,27
040CF1 C5                  A  3894    	PUSH	BC
040CF2 CD C5 0E 04         A  3895    	CALL	_putch
040CF6 C1                  A  3896    	POP	BC
                           A  3897    ;  380		putch(15);	// refresh all sprites
                           A  3898    .LINE 380
                           A  3899    
040CF7 010F0000            A  3900    	LD	BC,15
040CFB C5                  A  3901    	PUSH	BC
040CFC CD C5 0E 04         A  3902    	CALL	_putch
040D00 C1                  A  3903    	POP	BC
                           A  3904    ;  381		return;
                           A  3905    ;  382	}
                           A  3906    .LINE 382
                           A  3907    
040D01 DDF9                A  3908    	LD	SP,IX
040D03 DDE1                A  3909    	POP	IX
040D05 C9                  A  3910    	RET	
                           A  3911    
                           A  3912    
                           A  3913    ;**************************** _vdp_spriteRefres
                           A  3914    ;Name                         Addr/Register   S
                           A  3915    ;_putch                              IMPORT  --
                           A  3916    
                           A  3917    
                           A  3918    ; Stack Frame Size: 6 (bytes)
                           A  3919    ;       Spill Code: 0 (instruction)
                           A  3920    
                           A  3921    
                           A  3922    .ENDFUNC "vdp_spriteRefresh",382,"_vdp_spriteRe
                           A  3923    ;  383	
                           A  3924    ;  384	UINT8 vdp_cursorGetXpos(void)
                           A  3925    ;  385	{
040D06                     A  3926    _vdp_cursorGetXpos:
                           A  3927    .DEFINE "_vdp_cursorGetXpos"
                           A  3928    
                           A  3929    .VALUE _vdp_cursorGetXpos
                           A  3930    
                           A  3931    .CLASS 2
                           A  3932    
                           A  3933    .TYPE 76
                           A  3934    
                           A  3935    .ENDEF
                           A  3936    
                           A  3937    .BEGFUNC "vdp_cursorGetXpos",385,"_vdp_cursorGe
                           A  3938    
                           A  3939    .LINE 385
                           A  3940    
                           A  3941    .DEFINE "delay"
                           A  3942    
                           A  3943    .CLASS 65
                           A  3944    
                           A  3945    .VALUE -3
                           A  3946    
                           A  3947    .TYPE 14
                           A  3948    
                           A  3949    .ENDEF
                           A  3950    
040D06 DDE5                A  3951    	PUSH	IX
040D08 DD210000 00         A  3952    	LD	IX,0
040D0D DD39                A  3953    	ADD	IX,SP
040D0F C5                  A  3954    	PUSH	BC
                           A  3955    ;  386		unsigned int delay;
                           A  3956    ;  387		
                           A  3957    ;  388		putch(23);	// VDP command
                           A  3958    .LINE 388
                           A  3959    
040D10 01170000            A  3960    	LD	BC,23
040D14 C5                  A  3961    	PUSH	BC
040D15 CD C5 0E 04         A  3962    	CALL	_putch
040D19 C1                  A  3963    	POP	BC
                           A  3964    ;  389		putch(0);	// VDP command
                           A  3965    .LINE 389
                           A  3966    
040D1A 01000000            A  3967    	LD	BC,0
040D1E C5                  A  3968    	PUSH	BC
040D1F CD C5 0E 04         A  3969    	CALL	_putch
040D23 C1                  A  3970    	POP	BC
                           A  3971    ;  390		putch(2);	// Request cursor posit
                           A  3972    .LINE 390
                           A  3973    
040D24 01020000            A  3974    	LD	BC,2
040D28 C5                  A  3975    	PUSH	BC
040D29 CD C5 0E 04         A  3976    	CALL	_putch
040D2D C1                  A  3977    	POP	BC
                           A  3978    ;  391		
                           A  3979    ;  392		delay = 255;
                           A  3980    .LINE 392
                           A  3981    
040D2E 01FF0000            A  3982    	LD	BC,255
040D32 DD0FFD              A  3983    	LD	(IX+%FFFFFFFD),BC
                           A  3984    ;  393		while(delay--);
040D35                     A  3985    L_59:
                           A  3986    .LINE 393
                           A  3987    
040D35 DD27FD              A  3988    	LD	HL,(IX+%FFFFFFFD)
040D38 DD31FD              A  3989    	LD	IY,(IX+%FFFFFFFD)
040D3B ED33FF              A  3990    	LEA	IY,IY+%FFFFFFFF
040D3E DD3EFD              A  3991    	LD	(IX+%FFFFFFFD),IY
040D41 CD F7 14 04         A  3992    	CALL	__icmpzero
040D45 20 EE               A  3993    	JR	NZ,L_59
                           A  3994    ;  394		return(getsysvar8bit(sysvar_cursorX
                           A  3995    .LINE 394
                           A  3996    
040D47 01070000            A  3997    	LD	BC,7
040D4B C5                  A  3998    	PUSH	BC
040D4C CD 07 0F 04         A  3999    	CALL	_getsysvar8bit
040D50 C1                  A  4000    	POP	BC
                           A  4001    ;  395	}
                           A  4002    .LINE 395
                           A  4003    
040D51 DDF9                A  4004    	LD	SP,IX
040D53 DDE1                A  4005    	POP	IX
040D55 C9                  A  4006    	RET	
                           A  4007    
                           A  4008    
                           A  4009    ;**************************** _vdp_cursorGetXpo
                           A  4010    ;Name                         Addr/Register   S
                           A  4011    ;_getsysvar8bit                      IMPORT  --
                           A  4012    ;_putch                              IMPORT  --
                           A  4013    ;delay                                 IX-3    
                           A  4014    
                           A  4015    
                           A  4016    ; Stack Frame Size: 9 (bytes)
                           A  4017    ;       Spill Code: 0 (instruction)
                           A  4018    
                           A  4019    
                           A  4020    .ENDFUNC "vdp_cursorGetXpos",395,"_vdp_cursorGe
                           A  4021    ;  396	
                           A  4022    ;  397	UINT8 vdp_cursorGetYpos(void)
                           A  4023    ;  398	{
040D56                     A  4024    _vdp_cursorGetYpos:
                           A  4025    .DEFINE "_vdp_cursorGetYpos"
                           A  4026    
                           A  4027    .VALUE _vdp_cursorGetYpos
                           A  4028    
                           A  4029    .CLASS 2
                           A  4030    
                           A  4031    .TYPE 76
                           A  4032    
                           A  4033    .ENDEF
                           A  4034    
                           A  4035    .BEGFUNC "vdp_cursorGetYpos",398,"_vdp_cursorGe
                           A  4036    
                           A  4037    .LINE 398
                           A  4038    
                           A  4039    .DEFINE "delay"
                           A  4040    
                           A  4041    .CLASS 65
                           A  4042    
                           A  4043    .VALUE -3
                           A  4044    
                           A  4045    .TYPE 14
                           A  4046    
                           A  4047    .ENDEF
                           A  4048    
040D56 DDE5                A  4049    	PUSH	IX
040D58 DD210000 00         A  4050    	LD	IX,0
040D5D DD39                A  4051    	ADD	IX,SP
040D5F C5                  A  4052    	PUSH	BC
                           A  4053    ;  399		unsigned int delay;
                           A  4054    ;  400		
                           A  4055    ;  401		putch(23);	// VDP command
                           A  4056    .LINE 401
                           A  4057    
040D60 01170000            A  4058    	LD	BC,23
040D64 C5                  A  4059    	PUSH	BC
040D65 CD C5 0E 04         A  4060    	CALL	_putch
040D69 C1                  A  4061    	POP	BC
                           A  4062    ;  402		putch(0);	// VDP command
                           A  4063    .LINE 402
                           A  4064    
040D6A 01000000            A  4065    	LD	BC,0
040D6E C5                  A  4066    	PUSH	BC
040D6F CD C5 0E 04         A  4067    	CALL	_putch
040D73 C1                  A  4068    	POP	BC
                           A  4069    ;  403		putch(2);	// Request cursor posit
                           A  4070    .LINE 403
                           A  4071    
040D74 01020000            A  4072    	LD	BC,2
040D78 C5                  A  4073    	PUSH	BC
040D79 CD C5 0E 04         A  4074    	CALL	_putch
040D7D C1                  A  4075    	POP	BC
                           A  4076    ;  404		
                           A  4077    ;  405		delay = 255;
                           A  4078    .LINE 405
                           A  4079    
040D7E 01FF0000            A  4080    	LD	BC,255
040D82 DD0FFD              A  4081    	LD	(IX+%FFFFFFFD),BC
                           A  4082    ;  406		while(delay--);
040D85                     A  4083    L_64:
                           A  4084    .LINE 406
                           A  4085    
040D85 DD27FD              A  4086    	LD	HL,(IX+%FFFFFFFD)
040D88 DD31FD              A  4087    	LD	IY,(IX+%FFFFFFFD)
040D8B ED33FF              A  4088    	LEA	IY,IY+%FFFFFFFF
040D8E DD3EFD              A  4089    	LD	(IX+%FFFFFFFD),IY
040D91 CD F7 14 04         A  4090    	CALL	__icmpzero
040D95 20 EE               A  4091    	JR	NZ,L_64
                           A  4092    ;  407		return(getsysvar8bit(sysvar_cursorY
                           A  4093    .LINE 407
                           A  4094    
040D97 01080000            A  4095    	LD	BC,8
040D9B C5                  A  4096    	PUSH	BC
040D9C CD 07 0F 04         A  4097    	CALL	_getsysvar8bit
040DA0 C1                  A  4098    	POP	BC
                           A  4099    ;  408	}
                           A  4100    .LINE 408
                           A  4101    
040DA1 DDF9                A  4102    	LD	SP,IX
040DA3 DDE1                A  4103    	POP	IX
040DA5 C9                  A  4104    	RET	
                           A  4105    
                           A  4106    
                           A  4107    ;**************************** _vdp_cursorGetYpo
                           A  4108    ;Name                         Addr/Register   S
                           A  4109    ;_getsysvar8bit                      IMPORT  --
                           A  4110    ;_putch                              IMPORT  --
                           A  4111    ;delay                                 IX-3    
                           A  4112    
                           A  4113    
                           A  4114    ; Stack Frame Size: 9 (bytes)
                           A  4115    ;       Spill Code: 0 (instruction)
                           A  4116    
                           A  4117    
                           A  4118    .ENDFUNC "vdp_cursorGetYpos",408,"_vdp_cursorGe
                           A  4119    ;  409	
                           A  4120    ;  410	char vdp_asciiCodeAt(unsigned char x, u
                           A  4121    ;  411	{
040DA6                     A  4122    _vdp_asciiCodeAt:
                           A  4123    .DEFINE "_vdp_asciiCodeAt"
                           A  4124    
                           A  4125    .VALUE _vdp_asciiCodeAt
                           A  4126    
                           A  4127    .CLASS 2
                           A  4128    
                           A  4129    .TYPE 66
                           A  4130    
                           A  4131    .ENDEF
                           A  4132    
                           A  4133    .BEGFUNC "vdp_asciiCodeAt",411,"_vdp_asciiCodeA
                           A  4134    
                           A  4135    .LINE 411
                           A  4136    
                           A  4137    .DEFINE "x"
                           A  4138    
                           A  4139    .CLASS 65
                           A  4140    
                           A  4141    .VALUE 6
                           A  4142    
                           A  4143    .TYPE 12
                           A  4144    
                           A  4145    .ENDEF
                           A  4146    
                           A  4147    .DEFINE "y"
                           A  4148    
                           A  4149    .CLASS 65
                           A  4150    
                           A  4151    .VALUE 9
                           A  4152    
                           A  4153    .TYPE 12
                           A  4154    
                           A  4155    .ENDEF
                           A  4156    
                           A  4157    .DEFINE "delay"
                           A  4158    
                           A  4159    .CLASS 65
                           A  4160    
                           A  4161    .VALUE -3
                           A  4162    
                           A  4163    .TYPE 14
                           A  4164    
                           A  4165    .ENDEF
                           A  4166    
040DA6 DDE5                A  4167    	PUSH	IX
040DA8 DD210000 00         A  4168    	LD	IX,0
040DAD DD39                A  4169    	ADD	IX,SP
040DAF C5                  A  4170    	PUSH	BC
                           A  4171    ;  412		unsigned int delay;
                           A  4172    ;  413		
                           A  4173    ;  414		putch(23);	// VDP command
                           A  4174    .LINE 414
                           A  4175    
040DB0 01170000            A  4176    	LD	BC,23
040DB4 C5                  A  4177    	PUSH	BC
040DB5 CD C5 0E 04         A  4178    	CALL	_putch
040DB9 C1                  A  4179    	POP	BC
                           A  4180    ;  415		putch(0);	// VDP command
                           A  4181    .LINE 415
                           A  4182    
040DBA 01000000            A  4183    	LD	BC,0
040DBE C5                  A  4184    	PUSH	BC
040DBF CD C5 0E 04         A  4185    	CALL	_putch
040DC3 C1                  A  4186    	POP	BC
                           A  4187    ;  416		putch(3);	// Request ascii code a
                           A  4188    .LINE 416
                           A  4189    
040DC4 01030000            A  4190    	LD	BC,3
040DC8 C5                  A  4191    	PUSH	BC
040DC9 CD C5 0E 04         A  4192    	CALL	_putch
040DCD C1                  A  4193    	POP	BC
                           A  4194    ;  417		putch(x);
                           A  4195    .LINE 417
                           A  4196    
040DCE DD7E06              A  4197    	LD	A,(IX+%6)
040DD1 B7ED62              A  4198    	UEXT	HL
040DD4 6F                  A  4199    	LD	L,A
040DD5 E5                  A  4200    	PUSH	HL
040DD6 CD C5 0E 04         A  4201    	CALL	_putch
040DDA C1                  A  4202    	POP	BC
                           A  4203    ;  418		putch(0);
                           A  4204    .LINE 418
                           A  4205    
040DDB 01000000            A  4206    	LD	BC,0
040DDF C5                  A  4207    	PUSH	BC
040DE0 CD C5 0E 04         A  4208    	CALL	_putch
040DE4 C1                  A  4209    	POP	BC
                           A  4210    ;  419		putch(y);
                           A  4211    .LINE 419
                           A  4212    
040DE5 DD7E09              A  4213    	LD	A,(IX+%9)
040DE8 B7ED62              A  4214    	UEXT	HL
040DEB 6F                  A  4215    	LD	L,A
040DEC E5                  A  4216    	PUSH	HL
040DED CD C5 0E 04         A  4217    	CALL	_putch
040DF1 C1                  A  4218    	POP	BC
                           A  4219    ;  420		putch(0);
                           A  4220    .LINE 420
                           A  4221    
040DF2 01000000            A  4222    	LD	BC,0
040DF6 C5                  A  4223    	PUSH	BC
040DF7 CD C5 0E 04         A  4224    	CALL	_putch
040DFB C1                  A  4225    	POP	BC
                           A  4226    ;  421		
                           A  4227    ;  422		delay = 64000;
                           A  4228    .LINE 422
                           A  4229    
040DFC 0100FA00            A  4230    	LD	BC,64000
040E00 DD0FFD              A  4231    	LD	(IX+%FFFFFFFD),BC
                           A  4232    ;  423		while(delay--);
040E03                     A  4233    L_69:
                           A  4234    .LINE 423
                           A  4235    
040E03 DD27FD              A  4236    	LD	HL,(IX+%FFFFFFFD)
040E06 DD31FD              A  4237    	LD	IY,(IX+%FFFFFFFD)
040E09 ED33FF              A  4238    	LEA	IY,IY+%FFFFFFFF
040E0C DD3EFD              A  4239    	LD	(IX+%FFFFFFFD),IY
040E0F CD F7 14 04         A  4240    	CALL	__icmpzero
040E13 20 EE               A  4241    	JR	NZ,L_69
                           A  4242    ;  424		return(getsysvar8bit(sysvar_scrchar
                           A  4243    .LINE 424
                           A  4244    
040E15 01090000            A  4245    	LD	BC,9
040E19 C5                  A  4246    	PUSH	BC
040E1A CD 07 0F 04         A  4247    	CALL	_getsysvar8bit
040E1E C1                  A  4248    	POP	BC
                           A  4249    ;  425	}
                           A  4250    .LINE 425
                           A  4251    
040E1F DDF9                A  4252    	LD	SP,IX
040E21 DDE1                A  4253    	POP	IX
040E23 C9                  A  4254    	RET	
                           A  4255    
                           A  4256    
                           A  4257    ;**************************** _vdp_asciiCodeAt 
                           A  4258    ;Name                         Addr/Register   S
                           A  4259    ;_getsysvar8bit                      IMPORT  --
                           A  4260    ;_putch                              IMPORT  --
                           A  4261    ;delay                                 IX-3    
                           A  4262    ;y                                     IX+9    
                           A  4263    ;x                                     IX+6    
                           A  4264    
                           A  4265    
                           A  4266    ; Stack Frame Size: 15 (bytes)
                           A  4267    ;       Spill Code: 0 (instruction)
                           A  4268    
                           A  4269    
                           A  4270    .ENDFUNC "vdp_asciiCodeAt",425,"_vdp_asciiCodeA
                           A  4271    ;  426	
                           A  4272    ;  427	void vdp_cursorDisable(void)
                           A  4273    ;  428	{
040E24                     A  4274    _vdp_cursorDisable:
                           A  4275    .DEFINE "_vdp_cursorDisable"
                           A  4276    
                           A  4277    .VALUE _vdp_cursorDisable
                           A  4278    
                           A  4279    .CLASS 2
                           A  4280    
                           A  4281    .TYPE 65
                           A  4282    
                           A  4283    .ENDEF
                           A  4284    
                           A  4285    .BEGFUNC "vdp_cursorDisable",428,"_vdp_cursorDi
                           A  4286    
040E24 DDE5                A  4287    	PUSH	IX
040E26 DD210000 00         A  4288    	LD	IX,0
040E2B DD39                A  4289    	ADD	IX,SP
                           A  4290    ;  429		putch(23);
                           A  4291    .LINE 429
                           A  4292    
040E2D 01170000            A  4293    	LD	BC,23
040E31 C5                  A  4294    	PUSH	BC
040E32 CD C5 0E 04         A  4295    	CALL	_putch
040E36 C1                  A  4296    	POP	BC
                           A  4297    ;  430		putch(1);
                           A  4298    .LINE 430
                           A  4299    
040E37 01010000            A  4300    	LD	BC,1
040E3B C5                  A  4301    	PUSH	BC
040E3C CD C5 0E 04         A  4302    	CALL	_putch
040E40 C1                  A  4303    	POP	BC
                           A  4304    ;  431		putch(0);
                           A  4305    .LINE 431
                           A  4306    
040E41 01000000            A  4307    	LD	BC,0
040E45 C5                  A  4308    	PUSH	BC
040E46 CD C5 0E 04         A  4309    	CALL	_putch
040E4A C1                  A  4310    	POP	BC
                           A  4311    ;  432	}
                           A  4312    .LINE 432
                           A  4313    
040E4B DDF9                A  4314    	LD	SP,IX
040E4D DDE1                A  4315    	POP	IX
040E4F C9                  A  4316    	RET	
                           A  4317    
                           A  4318    
                           A  4319    ;**************************** _vdp_cursorDisabl
                           A  4320    ;Name                         Addr/Register   S
                           A  4321    ;_putch                              IMPORT  --
                           A  4322    
                           A  4323    
                           A  4324    ; Stack Frame Size: 6 (bytes)
                           A  4325    ;       Spill Code: 0 (instruction)
                           A  4326    
                           A  4327    
                           A  4328    .ENDFUNC "vdp_cursorDisable",432,"_vdp_cursorDi
                           A  4329    ;  433	
                           A  4330    ;  434	void vdp_cursorEnable(void)
                           A  4331    ;  435	{
040E50                     A  4332    _vdp_cursorEnable:
                           A  4333    .DEFINE "_vdp_cursorEnable"
                           A  4334    
                           A  4335    .VALUE _vdp_cursorEnable
                           A  4336    
                           A  4337    .CLASS 2
                           A  4338    
                           A  4339    .TYPE 65
                           A  4340    
                           A  4341    .ENDEF
                           A  4342    
                           A  4343    .BEGFUNC "vdp_cursorEnable",435,"_vdp_cursorEna
                           A  4344    
040E50 DDE5                A  4345    	PUSH	IX
040E52 DD210000 00         A  4346    	LD	IX,0
040E57 DD39                A  4347    	ADD	IX,SP
                           A  4348    ;  436		putch(23);
                           A  4349    .LINE 436
                           A  4350    
040E59 01170000            A  4351    	LD	BC,23
040E5D C5                  A  4352    	PUSH	BC
040E5E CD C5 0E 04         A  4353    	CALL	_putch
040E62 C1                  A  4354    	POP	BC
                           A  4355    ;  437		putch(1);
                           A  4356    .LINE 437
                           A  4357    
040E63 01010000            A  4358    	LD	BC,1
040E67 C5                  A  4359    	PUSH	BC
040E68 CD C5 0E 04         A  4360    	CALL	_putch
040E6C C1                  A  4361    	POP	BC
                           A  4362    ;  438		putch(1);
                           A  4363    .LINE 438
                           A  4364    
040E6D 01010000            A  4365    	LD	BC,1
040E71 C5                  A  4366    	PUSH	BC
040E72 CD C5 0E 04         A  4367    	CALL	_putch
040E76 C1                  A  4368    	POP	BC
                           A  4369    ;  439	}
                           A  4370    .LINE 439
                           A  4371    
040E77 DDF9                A  4372    	LD	SP,IX
040E79 DDE1                A  4373    	POP	IX
040E7B C9                  A  4374    	RET	
                           A  4375    
                           A  4376    
                           A  4377    ;**************************** _vdp_cursorEnable
                           A  4378    ;Name                         Addr/Register   S
                           A  4379    ;_putch                              IMPORT  --
                           A  4380    
                           A  4381    
                           A  4382    ; Stack Frame Size: 6 (bytes)
                           A  4383    ;       Spill Code: 0 (instruction)
                           A  4384    
                           A  4385    
                           A  4386    .ENDFUNC "vdp_cursorEnable",439,"_vdp_cursorEna
                           A  4387    ;  440	
                           A  4388    ;  441	void vdp_scroll(unsigned char extent, u
                           A  4389    ;  442	{
040E7C                     A  4390    _vdp_scroll:
                           A  4391    .DEFINE "_vdp_scroll"
                           A  4392    
                           A  4393    .VALUE _vdp_scroll
                           A  4394    
                           A  4395    .CLASS 2
                           A  4396    
                           A  4397    .TYPE 65
                           A  4398    
                           A  4399    .ENDEF
                           A  4400    
                           A  4401    .BEGFUNC "vdp_scroll",442,"_vdp_scroll"
                           A  4402    
                           A  4403    .LINE 442
                           A  4404    
                           A  4405    .DEFINE "extent"
                           A  4406    
                           A  4407    .CLASS 65
                           A  4408    
                           A  4409    .VALUE 6
                           A  4410    
                           A  4411    .TYPE 12
                           A  4412    
                           A  4413    .ENDEF
                           A  4414    
                           A  4415    .DEFINE "direction"
                           A  4416    
                           A  4417    .CLASS 65
                           A  4418    
                           A  4419    .VALUE 9
                           A  4420    
                           A  4421    .TYPE 12
                           A  4422    
                           A  4423    .ENDEF
                           A  4424    
                           A  4425    .DEFINE "speed"
                           A  4426    
                           A  4427    .CLASS 65
                           A  4428    
                           A  4429    .VALUE 12
                           A  4430    
                           A  4431    .TYPE 12
                           A  4432    
                           A  4433    .ENDEF
                           A  4434    
040E7C DDE5                A  4435    	PUSH	IX
040E7E DD210000 00         A  4436    	LD	IX,0
040E83 DD39                A  4437    	ADD	IX,SP
                           A  4438    ;  443		putch(23);
                           A  4439    .LINE 443
                           A  4440    
040E85 01170000            A  4441    	LD	BC,23
040E89 C5                  A  4442    	PUSH	BC
040E8A CD C5 0E 04         A  4443    	CALL	_putch
040E8E C1                  A  4444    	POP	BC
                           A  4445    ;  444		putch(7);	// scroll
                           A  4446    .LINE 444
                           A  4447    
040E8F 01070000            A  4448    	LD	BC,7
040E93 C5                  A  4449    	PUSH	BC
040E94 CD C5 0E 04         A  4450    	CALL	_putch
040E98 C1                  A  4451    	POP	BC
                           A  4452    ;  445		putch(extent);
                           A  4453    .LINE 445
                           A  4454    
040E99 DD7E06              A  4455    	LD	A,(IX+%6)
040E9C B7ED62              A  4456    	UEXT	HL
040E9F 6F                  A  4457    	LD	L,A
040EA0 E5                  A  4458    	PUSH	HL
040EA1 CD C5 0E 04         A  4459    	CALL	_putch
040EA5 C1                  A  4460    	POP	BC
                           A  4461    ;  446		putch(direction);
                           A  4462    .LINE 446
                           A  4463    
040EA6 DD7E09              A  4464    	LD	A,(IX+%9)
040EA9 B7ED62              A  4465    	UEXT	HL
040EAC 6F                  A  4466    	LD	L,A
040EAD E5                  A  4467    	PUSH	HL
040EAE CD C5 0E 04         A  4468    	CALL	_putch
040EB2 C1                  A  4469    	POP	BC
                           A  4470    ;  447		putch(speed);
                           A  4471    .LINE 447
                           A  4472    
040EB3 DD7E0C              A  4473    	LD	A,(IX+%C)
040EB6 B7ED62              A  4474    	UEXT	HL
040EB9 6F                  A  4475    	LD	L,A
040EBA E5                  A  4476    	PUSH	HL
040EBB CD C5 0E 04         A  4477    	CALL	_putch
040EBF C1                  A  4478    	POP	BC
                           A  4479    .LINE 448
                           A  4480    
040EC0 DDF9                A  4481    	LD	SP,IX
040EC2 DDE1                A  4482    	POP	IX
040EC4 C9                  A  4483    	RET	
                           A  4484    
                           A  4485    
                           A  4486    ;**************************** _vdp_scroll *****
                           A  4487    ;Name                         Addr/Register   S
                           A  4488    ;_putch                              IMPORT  --
                           A  4489    ;speed                                IX+12    
                           A  4490    ;direction                             IX+9    
                           A  4491    ;extent                                IX+6    
                           A  4492    
                           A  4493    
                           A  4494    ; Stack Frame Size: 15 (bytes)
                           A  4495    ;       Spill Code: 0 (instruction)
                           A  4496    
                           A  4497    
                           A  4498    .ENDFUNC "vdp_scroll",448,"_vdp_scroll"
                           A  4499    	XREF _getsysvar8bit:ROM
                           A  4500    	XREF _putch:ROM
                           A  4501    	XREF __imuls:ROM
                           A  4502    	XREF __lshru:ROM
                           A  4503    	XREF __stoiu:ROM
                           A  4504    	XREF __icmpzero:ROM
                           A  4505    	XREF __ishru_b:ROM
                           A  4506    	XREF __ishrs_b:ROM
                           A  4507    	XDEF _vdp_scroll
                           A  4508    	XDEF _vdp_cursorEnable
                           A  4509    	XDEF _vdp_cursorDisable
                           A  4510    	XDEF _vdp_asciiCodeAt
                           A  4511    	XDEF _vdp_cursorGetYpos
                           A  4512    	XDEF _vdp_cursorGetXpos
                           A  4513    	XDEF _vdp_spriteRefresh
                           A  4514    	XDEF _vdp_spriteActivateTotal
                           A  4515    	XDEF _vdp_spriteMoveBy
                           A  4516    	XDEF _vdp_spriteMoveBySelected
                           A  4517    	XDEF _vdp_spriteMoveTo
                           A  4518    	XDEF _vdp_spriteMoveToSelected
                           A  4519    	XDEF _vdp_spriteHide
                           A  4520    	XDEF _vdp_spriteHideSelected
                           A  4521    	XDEF _vdp_spriteShow
                           A  4522    	XDEF _vdp_spriteShowSelected
                           A  4523    	XDEF _vdp_spriteSetFrame
                           A  4524    	XDEF _vdp_spriteSetFrameSelected
                           A  4525    	XDEF _vdp_spritePreviousFrame
                           A  4526    	XDEF _vdp_spritePreviousFrameSelected
                           A  4527    	XDEF _vdp_spriteNextFrame
                           A  4528    	XDEF _vdp_spriteNextFrameSelected
                           A  4529    	XDEF _vdp_spriteAddFrame
                           A  4530    	XDEF _vdp_spriteAddFrameSelected
                           A  4531    	XDEF _vdp_spriteClearFrames
                           A  4532    	XDEF _vdp_spriteClearFramesSelected
                           A  4533    	XDEF _vdp_spriteSelect
                           A  4534    	XDEF _vdp_bitmapCreateSolidColor
                           A  4535    	XDEF _vdp_bitmapCreateSolidColorSelected
                           A  4536    	XDEF _vdp_bitmapDraw
                           A  4537    	XDEF _vdp_bitmapDrawSelected
                           A  4538    	XDEF _vdp_bitmapSendData
                           A  4539    	XDEF _vdp_bitmapSendDataSelected
                           A  4540    	XDEF _vdp_bitmapSelect
                           A  4541    	XDEF _vdp_plotSetOrigin
                           A  4542    	XDEF _vdp_plotCircleCircumference
                           A  4543    	XDEF _vdp_plotCircleRadius
                           A  4544    	XDEF _vdp_plotTriangle
                           A  4545    	XDEF _vdp_plotPoint
                           A  4546    	XDEF _vdp_plotLineTo
                           A  4547    	XDEF _vdp_plotMoveTo
                           A  4548    	XDEF _vdp_plot
                           A  4549    	XDEF _vdp_plotColour
                           A  4550    	XDEF _vdp_clearGraphics
                           A  4551    	XDEF _vdp_bgcolour
                           A  4552    	XDEF _vdp_fgcolour
                           A  4553    	XDEF _vdp_colour
                           A  4554    	XDEF _vdp_cursorGoto
                           A  4555    	XDEF _vdp_cursorUp
                           A  4556    	XDEF _vdp_cursorHome
                           A  4557    	XDEF _vdp_cls
                           A  4558    	XDEF _vdp_mode
                           A  4559    	XDEF _write32bit
                           A  4560    	XDEF _write16bit
                           A  4561    	END


Errors: 0
Warnings: 0
Lines Assembled: 4562
